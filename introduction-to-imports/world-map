{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"md`# World Map (Canvas)\n\nCompare to [SVG](/@d3/world-map-svg).`","pinCode":false,"dname":"0ddcdcc2-15b1-440d-8e47-29335a4589d5","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"viewof projection = (projectionInput({value: new URLSearchParams(location.search).get(\"projection\") || \"orthographic\"}))","pinCode":false,"dname":"3d8898ec-84e7-443e-8f2a-21a47d89b754","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"map = {\n  const context = DOM.context2d(width, height);\n  const path = d3.geoPath(projection, context);\n  context.save();\n  context.beginPath(), path(outline), context.clip(), context.fillStyle = \"#fff\", context.fillRect(0, 0, width, height);\n  context.beginPath(), path(graticule), context.strokeStyle = \"#ccc\", context.stroke();\n  context.beginPath(), path(land), context.fillStyle = \"#000\", context.fill();\n  context.restore();\n  context.beginPath(), path(outline), context.strokeStyle = \"#000\", context.stroke();\n  return context.canvas;\n}","pinCode":false,"dname":"92cd75df-4811-4a21-a638-c62d647c8229","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"height = {\n  const [[x0, y0], [x1, y1]] = d3.geoPath(projection.fitWidth(width, outline)).bounds(outline);\n  const dy = Math.ceil(y1 - y0), l = Math.min(Math.ceil(x1 - x0), dy);\n  projection.scale(projection.scale() * (l - 1) / l).precision(0.2);\n  return dy;\n}","pinCode":false,"dname":"8d4e1a10-bd3c-43e6-bdef-928b9fdb6cf5","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"outline = ({type: \"Sphere\"})","pinCode":false,"dname":"f1677843-78b0-49ed-810b-32cc6298a714","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"graticule = (d3.geoGraticule10())","pinCode":false,"dname":"881736b5-eaa0-4f92-a98b-165a9ed53bc9","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"land = (topojson.feature(world, world.objects.land))","pinCode":false,"dname":"75845f25-8400-4a6f-9662-59e3908d8937","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"world = (FileAttachment(\"land-50m.json\").json())","pinCode":false,"dname":"4002f5c4-f39d-4b93-b260-3c9ad3a78bd2","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"topojson = (require(\"topojson-client@3\"))","pinCode":false,"dname":"834504ff-71bd-4edd-aa3b-fb6188e67aae","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"d3 = (require(\"d3-geo@3\", \"d3-geo-projection@4\"))","pinCode":false,"dname":"0abd9a96-58e6-4385-9537-32df5f41141e","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"import { projectionInput }  from 'introduction-to-imports/projection-comparison'","pinCode":false,"dname":"8b0a0fb6-1c06-483f-b62e-897288a0fa01","codeMode":"javascript2"}}}],"version":"2.19.1"}