{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"md`# Views are Mutable Values\n\n<p style=\"background: #fffced; box-sizing: border-box; padding: 10px 20px;\">***Update Feb. 2021:*** *Observable now supports [**synchronized inputs**](/@observablehq/synchronized-inputs)! This notebook will remain for history, but please upgrade to [Observable Inputs](/@observablehq/inputs).*</p>\n\n[A view](/@mbostock/introduction-to-views) conveniently defines an interactive value.`","pinCode":false,"dname":"5d39b237-34df-48d5-9b99-149f9f3d27ff","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"viewof x = (html`<input type=range>`)","pinCode":false,"dname":"ebe6bb3c-d08b-4a19-8f3a-d92e3fc415cb","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"x","pinCode":false,"dname":"f1851718-daf2-4516-bbb7-5a0a7552c751","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`While interactive values are often controlled only by interaction, sometimes you also want programmatic control. You can do this by assigning to the view’s value and then dispatching an *input* event to notify the [associated generator](https://github.com/observablehq/notebook-stdlib/blob/master/README.md#Generators_input). Try clicking the play button <svg width=\"16\" height=\"16\" class=\"db\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linejoin=\"round\" fill=\"none\"><path d=\"M4 3L12 8L4 13Z\"></path></svg> in the cell below to set *x* to a random value.`","pinCode":false,"dname":"e5f6d8ed-9a12-4e7c-9a51-f946a0c060b2","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"{\n  viewof x.value = Math.random() * 100;\n  viewof x.dispatchEvent(new CustomEvent(\"input\"));\n}","pinCode":false,"dname":"fbe20243-451b-48e1-8760-88a1e503cf7c","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`You can also animate a view’s value:`","pinCode":false,"dname":"605c4fec-da7a-4707-9aff-7ffa33ca97be","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"{\n  for (let i = 1; i <= 50; ++i) {\n    viewof x.value = i;\n    viewof x.dispatchEvent(new CustomEvent(\"input\"));\n    yield;\n  }\n}","pinCode":false,"dname":"c6ca902c-8b5c-46ea-ad1b-86d93c213651","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"x","pinCode":false,"dname":"423aaa09-a562-48bc-afb6-4c715b035998","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`And here are some buttons that modify ${tex`x`} by adding or subtracting:`","pinCode":false,"dname":"f4f88198-55a9-43d7-80a6-fbd9388e2d92","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"{\n  const form = html`<form onsubmit=\"return false;\">\n<button name=inc>increment</button>\n<button name=dec>decrement</button>\n</form>`;\n  form.inc.onclick = () => {\n    ++viewof x.value;\n    viewof x.dispatchEvent(new CustomEvent(\"input\"));\n  };\n  form.dec.onclick = () => {\n    --viewof x.value;\n    viewof x.dispatchEvent(new CustomEvent(\"input\"));\n  };\n  return form;\n}","pinCode":false,"dname":"072cb111-564b-4832-bbe6-034068da5c80","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`And we can use it to [synchronize views](/@mbostock/synchronized-views):`","pinCode":false,"dname":"e46e4d14-9ff0-44c2-92af-943e4d28f974","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"{\n  const input = html`<input type=range min=0 max=100 step=1>`;\n  input.oninput = () => {\n    viewof x.value = input.valueAsNumber;\n    viewof x.dispatchEvent(new CustomEvent(\"input\"));\n  };\n  const update = () => input.value = viewof x.value;\n  viewof x.addEventListener(\"input\", update);\n  invalidation.then(() => viewof x.removeEventListener(\"input\", update));\n  return update(), input;\n}","pinCode":false,"dname":"bbed0687-dbd6-43ea-9b17-25a8a7d12e3f","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"x","pinCode":false,"dname":"02cb1104-c1fe-4fb0-95c6-9522fab65e74","codeMode":"javascript2"}}}],"version":"2.19.1"}