{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"md`# Connected Particles III\n\nSome particles on a random walk, with lines connecting nearby particles.`","pinCode":false,"dname":"0804332c-3cfd-4ba8-adb1-c5519c318e41","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"viewof scolor = Inputs.color({label: \"Favorite color\", value: \"#4682b4\"})","pinCode":false,"dname":"0950faa1-d1b4-4a72-9e2f-9a1a871d6ed2","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"{\n  const div = html`<div style=\"transition:background 250ms linear;height:23px;font-size:18px;text-align:center,line-height:20px\"><span class=\"r\">5</span><span class=\"g\">4</span><span class=\"b\">6</span></div>`;\n  yield div;\n  while (true) {\n     div.style.background = `rgb(${parseInt(Math.random()*255)},${parseInt(Math.random()*255)},${parseInt(Math.random()*255)})`;\n    div.querySelector(\".r\").style.color = `rgb(${parseInt(Math.random()*255)},${parseInt(Math.random()*255)},${parseInt(Math.random()*255)})`;\n    div.querySelector(\".g\").style.color = `rgb(${parseInt(Math.random()*255)},${parseInt(Math.random()*255)},${parseInt(Math.random()*255)})`;\n    div.querySelector(\".b\").style.color = `rgb(${parseInt(Math.random()*255)},${parseInt(Math.random()*255)},${parseInt(Math.random()*255)})`;\n    yield Promises.delay(1000, div);\n  }\n}","pinCode":false,"dname":"cba3f170-ddd6-4046-9847-ccceddca4b17","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"canvas = {\n  const minDistance2 = minDistance * minDistance;\n  const maxDistance2 = maxDistance * maxDistance;\n  const context = DOM.context2d(width, height);\n\n  const particles = new Array(n);\n  for (let i = 0; i < n; ++i) {\n    particles[i] = {\n      x: Math.random() * width,\n      y: Math.random() * height,\n      vx: 0,\n      vy: 0\n    };\n  }\n\n  while (true) {\n    context.save();\n    context.clearRect(0, 0, width, height);\n\tcontext.fillStyle = `rgb(${parseInt(Math.random()*255)},${parseInt(Math.random()*255)},${parseInt(Math.random()*255)})`;\n    context.strokeStyle =`rgb(${parseInt(Math.random()*255)},${parseInt(Math.random()*255)},${parseInt(Math.random()*255)})`;\n    for (let i = 0; i < n; ++i) {\n      const p = particles[i];\n      p.x += p.vx;\n      if (p.x < -maxDistance) p.x += width + maxDistance * 2;\n      else if (p.x > width + maxDistance) p.x -= width + maxDistance * 2;\n      p.y += p.vy;\n      if (p.y < -maxDistance) p.y += height + maxDistance * 2;\n      else if (p.y > height + maxDistance) p.y -= height + maxDistance * 2;\n      p.vx += 0.2 * (Math.random() - .5) - 0.01 * p.vx;\n      p.vy += 0.2 * (Math.random() - .5) - 0.01 * p.vy;\n      \n      context.beginPath();\n      context.arc(p.x, p.y, radius, 0, 2 * Math.PI);\n      context.fill();\n    }\n\n    for (let i = 0; i < n; ++i) {\n      for (let j = i + 1; j < n; ++j) {\n        const pi = particles[i];\n        const pj = particles[j];\n        const dx = pi.x - pj.x;\n        const dy = pi.y - pj.y;\n        const d2 = dx * dx + dy * dy;\n        if (d2 < maxDistance2) {\n          context.globalAlpha = d2 > minDistance2 ? (maxDistance2 - d2) / (maxDistance2 - minDistance2) : 1;\n          context.beginPath();\n          context.moveTo(pi.x, pi.y);\n          context.lineTo(pj.x, pj.y);\n          context.stroke();\n        }\n      }\n    }\n\n    context.restore();\n    yield context.canvas;\n  }\n}","pinCode":false,"dname":"e029c93e-a62d-4eac-bc04-143847deaee0","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"n = (200)","pinCode":false,"dname":"0c3c459b-ec10-4196-a9ea-b7c4784d70fb","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"height = (600)","pinCode":false,"dname":"da535c50-9b1d-4953-b1b5-942f9ad8e3b9","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"radius = (2.5)","pinCode":false,"dname":"779b63bb-21ef-4250-ae75-6a05d21ee066","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"minDistance = (40)","pinCode":false,"dname":"817640f8-5d3c-4a32-8faa-bff35acc8257","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"maxDistance = (60)","pinCode":false,"dname":"60cee8b4-f361-467b-af95-e97b96a95437","codeMode":"javascript2"}}}],"version":"2.19.1"}