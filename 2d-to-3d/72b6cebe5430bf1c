{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"md`# Hexbin\n\nA demonstration of [d3-hexbin](https://github.com/d3/d3-hexbin) with a color encoding; compare to [area](/@mbostock/d3-hexbin-area).\n\nData: [diamonds](https://github.com/observablehq/datasets/tree/master/diamonds)`","pinCode":false,"dname":"a573f766-f1fe-4277-9444-457e7ece5bd1","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"viewof radius = {\n  const form = html`<form>\n  <input name=i type=range min=2 max=20 step=1 value=8 style=\"width:180px;\">\n  <output style=\"font-size:smaller;font-style:oblique;\" name=o></output>\n</form>`;\n  form.i.oninput = () => form.o.value = `${form.value = form.i.valueAsNumber}px radius`;\n  form.i.oninput();\n  return form;\n}","pinCode":false,"dname":"a36ec5b9-d149-4ca4-8056-1a9c20eea4d3","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"chart = {\n  const svg = d3.create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, height]);\n\n  svg.append(\"g\")\n      .call(xAxis);\n\n  svg.append(\"g\")\n      .call(yAxis);\n\n  svg.append(\"g\")\n      .attr(\"stroke\", \"#000\")\n      .attr(\"stroke-opacity\", 0.1)\n    .selectAll(\"path\")\n    .data(bins)\n    .join(\"path\")\n      .attr(\"d\", hexbin.hexagon())\n      .attr(\"transform\", d => `translate(${d.x},${d.y})`)\n      .attr(\"fill\", d => color(d.length));\n\n  return svg.node();\n}","pinCode":false,"dname":"9bb22a8c-2252-4f32-9199-1b6de2fd58a5","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"data = (Object.assign(d3.csvParse(await FileAttachment(\"diamonds.csv\").text(), ({carat, price}) => ({x: +carat, y: +price})), {x: \"Carats\", y: \"$ Price\"}))","pinCode":false,"dname":"29868b5f-88ad-4655-a34f-d48b56a7d8f3","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"hexbin = (d3.hexbin()\n    .x(d => x(d.x))\n    .y(d => y(d.y))\n    .radius(radius * width / (height - 1))\n    .extent([[margin.left, margin.top], [width - margin.right, height - margin.bottom]]))","pinCode":false,"dname":"a15e1570-ae6b-416c-bc60-2226297a5783","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"bins = (hexbin(data))","pinCode":false,"dname":"25d9a92e-ae9b-4f51-add6-3429e95f7305","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"x = (d3.scaleLog()\n    .domain(d3.extent(data, d => d.x))\n    .rangeRound([margin.left, width - margin.right]))","pinCode":false,"dname":"437c425d-8862-4120-b2a5-7c2c62ed1f3b","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"y = (d3.scaleLog()\n    .domain(d3.extent(data, d => d.y))\n    .rangeRound([height - margin.bottom, margin.top]))","pinCode":false,"dname":"23e9a186-8209-4301-b1b7-92b6a8b8d99b","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"color = (d3.scaleSequential(d3.interpolateBuPu)\n    .domain([0, d3.max(bins, d => d.length) / 2]))","pinCode":false,"dname":"f4816c29-0833-4356-b519-471f0f692f6e","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"xAxis = (g => g\n    .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n    .call(d3.axisBottom(x).ticks(width / 80, \"\"))\n    .call(g => g.select(\".domain\").remove())\n    .call(g => g.append(\"text\")\n        .attr(\"x\", width - margin.right)\n        .attr(\"y\", -4)\n        .attr(\"fill\", \"currentColor\")\n        .attr(\"font-weight\", \"bold\")\n        .attr(\"text-anchor\", \"end\")\n        .text(data.x)))","pinCode":false,"dname":"681021f6-7024-4a4f-bed9-c4c562796969","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"yAxis = (g => g\n    .attr(\"transform\", `translate(${margin.left},0)`)\n    .call(d3.axisLeft(y).ticks(null, \".1s\"))\n    .call(g => g.select(\".domain\").remove())\n    .call(g => g.append(\"text\")\n        .attr(\"x\", 4)\n        .attr(\"y\", margin.top)\n        .attr(\"dy\", \".71em\")\n        .attr(\"fill\", \"currentColor\")\n        .attr(\"font-weight\", \"bold\")\n        .attr(\"text-anchor\", \"start\")\n        .text(data.y)))","pinCode":false,"dname":"e1f30288-532f-4ac0-ac1e-54f271fc27e2","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"height = (Math.max(640, width))","pinCode":false,"dname":"89b5bddc-f1e1-4931-ac7f-b30db2eb6908","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"margin = ({top: 20, right: 20, bottom: 30, left: 40})","pinCode":false,"dname":"be0239d9-d155-43bf-9b96-00cda35b1f26","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"d3 = (require(\"d3@6\", \"d3-hexbin@0.2\"))","pinCode":false,"dname":"dd774bb5-bfbd-4abf-ab0d-5503febc45e3","codeMode":"javascript2"}}}],"version":"2.19.1"}