{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"md`# TOC\n\nThis notebook can generate a table of contents automatically for your notebook.\n\n\\`\\`\\`js\nimport {toc} from \"@bryangingechen/toc\"\n\\`\\`\\`\n\nHereâ€™s an example:`","pinCode":false,"dname":"aefad66f-f8b2-4c8d-b990-cdb04800fcf1","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"toc()","pinCode":false,"dname":"255b7d17-248e-4dc1-a5ed-e2d53828f204","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`## Implementation`","pinCode":false,"dname":"75a29118-311b-4b38-aec5-dadab2d976d3","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"toc = (function toc(selector = \"h1,h2,h3,h4,h5,h6\") {\n  return Generators.observe(notify => {\n    let headings = [];\n\n    function observed() {\n      const h = Array.from(document.querySelectorAll(selector));\n      if (h.length !== headings.length || h.some((h, i) => headings[i] !== h)) {\n        notify(html`<b>Table of Contents</b><ul>${Array.from(headings = h, h => {\n          const level = parseInt(h.tagName.slice(1));\n          return Object.assign(\n            html`${level > 1 ? '<ul>'.repeat(level-1) + '<li>' : '<li>'}<a href=#${h.id}>${DOM.text(h.textContent)}`,\n            {onclick: e => (e.preventDefault(), h.scrollIntoView())}\n          );\n        })}`);\n      }\n    }\n\n    const observer = new MutationObserver(observed);\n    observer.observe(document.body, {childList: true, subtree: true});\n    observed();\n    return () => observer.disconnect();\n  });\n})","pinCode":false,"dname":"3dea3916-ca0d-43e3-a13a-490d6426f73d","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`## Hooray\n\nIt worked!`","pinCode":false,"dname":"40b7425d-2374-401c-8a00-4ab1aa86e715","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### This is a sub-section`","pinCode":false,"dname":"2264b58e-a8df-49e5-afde-179535992ea0","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`A little text`","pinCode":false,"dname":"bcd3bcb1-afbc-47d8-930a-4e35a9f4e9bc","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`#### A sub-sub-section?`","pinCode":false,"dname":"92767a6e-8ff2-4287-b291-8cee65ac6e91","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`##### A sub-sub-sub-section?`","pinCode":false,"dname":"060b4a7d-26d4-45bf-8dc9-8da53f53f038","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`###### A sub-sub-sub-sub-section! (h6!)`","pinCode":false,"dname":"5fbc53a3-ab00-4fd8-a8cf-70dbe03888c8","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### Another sub-section`","pinCode":false,"dname":"3d2879b9-49cd-48b5-a1d0-b2b513b68a18","codeMode":"javascript2"}}}],"version":"2.19.1"}