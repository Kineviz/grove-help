{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"md`# Brushable Scatterplot\n\nThis chart shows the inverse relationship between engine power (*y*-axis) and fuel efficiency (*x*-axis) in ${data.length} cars from 1970–1982. Brushing this scatterplot will show the selected data points. \nThanks to [John Alexis Guerra Gómez](/@john-guerra) for suggestions.`","pinCode":false,"dname":"081f786e-75be-4f71-bb66-e1d841956271","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"","pinCode":false,"dname":"30039578-a0d6-4ea3-97f6-23ad86b89fb2","codeMode":"sql","db":"groves$not$javascript$files$unemployment$x$csv","dbTable":true,"selectedTable":"groves$not$javascript$files$unemployment$x$csv","selectedColumns":["id","state","county","rate"],"selectedCategoryFrom":"files","selectedCategory":"groves-not-javascript/files/unemployment-x.csv","sqlType":"sqlite"}}},{"type":"codeTool","data":{"codeData":{"value":"viewof selection = {\n  const svg = d3 .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, height])\n      .property(\"value\", []);\n\n  const brush = d3.brush()\n      .on(\"start brush end\", brushed);\n\n  svg.append(\"g\")\n      .call(xAxis);\n\n  svg.append(\"g\")\n      .call(yAxis);\n\n  const dot = svg.append(\"g\")\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"steelblue\")\n      .attr(\"stroke-width\", 1.5)\n    .selectAll(\"circle\")\n    .data(data)\n    .join(\"circle\")\n      .attr(\"transform\", d => `translate(${x(d.x)},${y(d.y)})`)\n      .attr(\"r\", 3);\n\n  svg.call(brush);\n\n  function brushed({selection}) {\n    let value = [];\n    if (selection) {\n      const [[x0, y0], [x1, y1]] = selection;\n      value = dot\n        .style(\"stroke\", \"gray\")\n        .filter(d => x0 <= x(d.x) && x(d.x) < x1 && y0 <= y(d.y) && y(d.y) < y1)\n        .style(\"stroke\", \"steelblue\")\n        .data();\n    } else {\n      dot.style(\"stroke\", \"steelblue\");\n    }\n    svg.property(\"value\", value).dispatch(\"input\");\n  }\n\n  return svg.node();\n}","pinCode":false,"dname":"c7d18018-4456-4474-b73d-e9e8694ef48a","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"","pinCode":true,"dname":"ce68e969-e602-489c-8399-d7050e9b336e","codeMode":"sql","tableName":"","dbTable":true}}},{"type":"codeTool","data":{"codeData":{"value":"selection","pinCode":false,"dname":"dff7146d-22d3-41dc-ab43-e71cc8892c71","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"height = (600)","pinCode":false,"dname":"4d808685-fcba-4d32-8864-474b74aae7e1","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"margin = ({top: 20, right: 30, bottom: 30, left: 40})","pinCode":false,"dname":"4bfda2f4-83e1-4095-8cc8-735989e7ded6","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"x = (d3.scaleLinear()\n    .domain(d3.extent(data, d => d.x)).nice()\n    .range([margin.left, width - margin.right]))","pinCode":false,"dname":"29fec6e1-b843-4b75-9c5b-07f39850cc1b","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"y = (d3.scaleLinear()\n   .domain(d3.extent(data, d => d.y)).nice()\n   .range([height - margin.bottom, margin.top]))","pinCode":false,"dname":"c9d8afce-1fd6-477c-a535-3713e043a64f","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"xAxis = (g => g\n    .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n    .call(d3.axisBottom(x))\n    .call(g => g.select(\".domain\").remove())\n    .call(g => g.append(\"text\")\n        .attr(\"x\", width - margin.right)\n        .attr(\"y\", -4)\n        .attr(\"fill\", \"#000\")\n        .attr(\"font-weight\", \"bold\")\n        .attr(\"text-anchor\", \"end\")\n        .text(data.x)))","pinCode":false,"dname":"1da2e0e8-fc75-4c8c-9af0-79dc787c914a","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"data.x","pinCode":true,"dname":"312fe530-f941-4c74-aa16-50dce6cd9b82","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"yAxis = (g => g\n    .attr(\"transform\", `translate(${margin.left},0)`)\n    .call(d3.axisLeft(y))\n    .call(g => g.select(\".domain\").remove())\n    .call(g => g.select(\".tick:last-of-type text\").clone()\n        .attr(\"x\", 4)\n        .attr(\"text-anchor\", \"start\")\n        .attr(\"font-weight\", \"bold\")\n        .text(data.y)))","pinCode":false,"dname":"60b41d52-6deb-4de8-9ae3-63ab68fbc4bd","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"data = (Object.assign(d3.csvParse(await FileAttachment(\"cars-2.csv\").text(), ({Name: name, Miles_per_Gallon: x, Horsepower: y}) => ({name, x: +x, y: +y})), {x: \"Miles per Gallon\", y: \"Horsepower\"}))","pinCode":false,"dname":"6d85a099-57f6-4c58-8bcf-93c9c1b97cea","codeMode":"javascript2"}}}],"version":"2.19.1"}