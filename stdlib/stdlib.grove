{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"md`# Standard Library`","pinCode":false,"dname":"df9c9534-7901-4db1-ac26-5ef417fc7250","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`## Table of Contents\n- [currentUser](#currentUserSection) - Identify the current user.\n- [DatabaseClient](#databaseClientSection) - Create a database client.\n- [DOM](#domSection) - Create HTML and SVG elements.\n- [FileAttachment](#fileAttachmentSection) - Read local or remote files.\n- [Generators](#generatorsSection) - Utilities for generators and iterators.\n- [html](#htmlSection) - Render HTML.\n- [invalidation](#invalidationSection) - Dispose of resources.\n- [md](#mdSection) - Render Markdown.\n- [now](#nowSection) - Return the current value of Date.now.\n- [Promises](#promisesSection) - Utilities for promises.\n- [require](#requireSection) - Load third-party libraries.\n- [Secrets](#secretsSection) - Store access keys to make private data accessible without revealing the keys.\n- [SVG](#svgSection) - Render Scalable Vector Graphics.\n- [tex](#texSection) - Render LaTeX.\n- [visibility](#visibilitySection) - A special promise that waits for visibility.\n- [width](#widthSection) - Returns the current page width.\n\n\n- [Recommended Libraries](#additionalLibrariesSection)\n- [Deprecated/No Longer Recommended](#deprecatedSection)\n`","pinCode":false,"dname":"9c62b1df-59aa-4611-bded-78acc734c16e","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"currentUserSection = (md ` ## currentUser\nThe \\`currentUser\\` object is a special addition to the standard library, only available within private [Teams](https://observablehq.com/pricing) notebooks. \\`currentUser\\` provides information about the team member currently viewing the page:\n`)","pinCode":false,"dname":"9690717b-9c6d-489c-a123-406d4457a08a","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"currentUser","pinCode":false,"dname":"61da838b-5d05-400d-98fe-3d89d083a722","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"databaseClientSection = (md `## DatabaseClient`)","pinCode":false,"dname":"3fba1405-b64f-49ec-ab26-85b9607ecbe7","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Create a database client for a configured database:`","pinCode":false,"dname":"a2ea67de-8756-4679-8b22-3a6519bab39d","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"client = (DatabaseClient(\"Baby Names\"))","pinCode":false,"dname":"fc0273d6-773b-4748-94a3-9947fec93597","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`This returns a promise to the client for the database with the specified name. You then can use a \\`query\\` method that returns a promise to the array of results:`","pinCode":false,"dname":"e56e77f5-05ab-4e7a-8af5-03978fa1cd5f","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"names = (client.query(\n  `SELECT name, gender, year, SUM(number) AS number\n  FROM names\n  WHERE year > ?\n  GROUP BY name, gender, year`,\n  [1920]\n))","pinCode":false,"dname":"4b6533c6-b4ee-4136-ae48-d1490970df6b","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`The database client has the following methods available:\n\n| Name | Description |\n|-|-|\n| databaseClient.query() | Run the specified SQL query, returning a promise to the array of results. |\n| databaseClient.queryRow() | Similar to databaseClient.query but returns a promise to a single row of results. |\n| databaseClient.explain() | Explains the query plan for the specified query, returning a promise to an HTML element. (PostgreSQL databases only.)|\n| databaseClient.describe() | Describes the schema for the table with the specified name, returning a promise to an HTML table. |\n\nSee [Connecting to databases](https://observablehq.com/@observablehq/databases) for more examples and explanation.`","pinCode":false,"dname":"aa527e6a-8422-454f-9355-21baf07f5d12","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"domSection = (md `## DOM\n\nThe following [Document Object Model](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction) methods are supported.\n\n### DOM.context2d(_width_, _height_[, _dpi_]))\nReturns a new canvas context with the specified _width_ and _height_ and the specified device pixel ratio _dpi_. If _dpi_ is not specified, it defaults to [\\`_window_.devicePixelRatio\\`](https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio). To access the context's canvas, use [\\`_context_.canvas\\`](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/canvas). For example, to create a 960x500 canvas:\n`)","pinCode":false,"dname":"6c2518fa-b8b4-46d3-9fd4-bfd477460b41","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\n{\n  const context = DOM.context2d(960, 500);\n  return context.canvas;\n}\n\\`\\`\\``","pinCode":false,"dname":"d9c6d098-a96d-4e86-8a02-8f8cbecc7b4d","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`To expand the DOM, click the black triangle next to \"Object\":`","pinCode":false,"dname":"ba6c9fe1-ec26-4f6a-bb32-a05d01a686f5","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"DOM","pinCode":false,"dname":"7560d7da-d80e-4d55-99d5-7dda0407d123","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Another example: the following code creates a small canvas and adds text:`","pinCode":false,"dname":"57001c22-7210-49f3-bffc-eea1852bd324","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"{\n  const context = DOM.context2d(width, 33);\n  context.fillText(\"Hello, I am a canvas!\", 0, 20);\n  return context.canvas;\n}","pinCode":false,"dname":"b9ad1318-7785-4784-810b-7e1398892519","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`DOM.context2d\\` is helpful if you are using [2D Canvas](https://www.w3.org/TR/2dcontext/) (rather than [WebGL](https://webglfundamentals.org/)), because of automatic pixel density scaling.\n`","pinCode":false,"dname":"395876de-ecd6-47eb-8afd-2839a5941c8a","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### DOM.uid([_name_])\nReturns a new unique _identifier_. If _name_ is specified, the _identifier_.\\`id\\` will be derived from the specified _name_, which may be useful for debugging. If \\`DOM.uid\\` is called repeatedly with the same _name_, every returned _identifier_ is still unique (that is, different). \n\nIdentifiers are useful in SVG: \n- Use _identifier_.\\`href\\` for IRI references, such as the [xlink:href](https://www.w3.org/TR/SVG/animate.html#HrefAttribute) attribute.\n- Use _identifier_.\\`toString\\` for functional notation, such as the [clip-path](https://www.w3.org/TR/css-masking/#the-clip-path) presentation attribute.`","pinCode":false,"dname":"838eeff2-fc6b-4b74-b99a-753c292daf88","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`For example, to clip the image of the Mona Lisa (attached to this notebook) to a circle of radius 320 px:`","pinCode":false,"dname":"27780c46-6414-44d1-8b35-c2e1cc4e1eeb","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"{\n  const clip = DOM.uid(\"clip\");\n  return svg`<svg width=\"128\" height=\"128\" viewBox=\"0 0 640 640\">\n  <defs>\n    <clipPath id=\"${clip.id}\">\n      <circle cx=\"320\" cy=\"320\" r=\"320\"></circle>\n    </clipPath>\n  </defs>\n  <image\n    clip-path=\"${clip}\"\n    width=\"640\" height=\"640\"\n    preserveAspectRatio=\"xMidYMin slice\"\n    xlink:href=\"${await FileAttachment(\"image@1.png\").url()}\"\n  ></image>\n</svg>`;\n}","pinCode":false,"dname":"493224bb-4512-484f-beb3-12150b023216","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Using \\`DOM.uid\\` is strongly recommended over hand-coding as it ensures that your identifiers are still unique if your code is imported into another notebook. Because _identifier_.\\`href\\` and _identifier_.\\`toString\\` return absolute rather than local IRIs, it also works well in conjunction with a notebook’s [base URL](https://developer.mozilla.org/docs/Web/HTML/Element/base).`","pinCode":false,"dname":"a343cdbb-7933-4118-9da8-86cfe4e59501","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"fileAttachmentSection = (md ` ## FileAttachment\nTo read in local files, use one of the [FileAttachment](#fileAttachmentSection) methods or a [FileReader](https://developer.mozilla.org/en-US/docs/Web/API/FileReader).\nSee [File Attachments](https://observablehq.com/@observablehq/file-attachments) for examples and more explanation. \n`)","pinCode":false,"dname":"7d9d9aed-0faa-4c56-ab31-8b39b6278d35","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### fileAttachment.arrayBuffer()\nReturns a promise to the file's contents as an [ArrayBuffer](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer).`","pinCode":false,"dname":"6312e0ec-55df-484a-ba83-7ff9515822e7","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nconst city = shapefile.read(await FileAttachment(\"sf.shp\").arrayBuffer());\n\\`\\`\\``","pinCode":false,"dname":"061f4e6e-9de0-4114-89b1-ceb95580da15","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### fileAttachment.blob()\nReturns a promise to a [Blob](https://developer.mozilla.org/en-US/docs/Web/API/Blob) containing the raw content of the file.`","pinCode":false,"dname":"50f61754-0645-4888-87a1-e70f35f365d6","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nconst blob = await FileAttachment(\"binary-data.dat\").blob();\n\\`\\`\\``","pinCode":false,"dname":"50250771-3864-4906-872f-3e4cc94f7ec0","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### fileAttachment.csv({_array_ = false, _typed_ = false} = {})\nReturns a promise to the file’s contents, parsed as comma-separated values (CSV) into an array.`","pinCode":false,"dname":"feae6b5e-4799-47da-8bfe-d4809e9dc5cd","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nconst data = await FileAttachment(\"cars.csv\").csv();\n\\`\\`\\``","pinCode":false,"dname":"243c7b9e-f9cd-4b08-b484-e32e02707fb3","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`If _array_ is true, an array of arrays is returned; otherwise, the first row is assumed to be the header row and an array of objects is returned, and the returned array has a _data_.\\`columns\\` property that is an array of column names. (See [\\`d3.csvParseRows\\`](https://github.com/d3/d3-dsv/blob/master/README.md#dsv_parseRows).) If _typed_ is true, [automatic type inference](https://observablehq.com/@d3/d3-autotype) is applied; only use this feature if you know your data is compatible.`","pinCode":false,"dname":"d1e1ba30-5bb4-495d-9841-4c6edb8b4662","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### fileAttachment.image()\nReturns a promise to a file loaded as an [Image](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/Image). The promise resolves when the image has finished loading, making this useful for reading the image pixels in Canvas, or for loading the image into a WebGL texture. Consider [\\`fileAttachment.url\\`](#fileAttachmentUrlSection) if you want to embed an image in HTML or Markdown.`","pinCode":false,"dname":"9d418a92-e058-40d6-a746-f03bae01115d","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nconst image = await FileAttachment(\"sunset.jpg\").image();\n\\`\\`\\``","pinCode":false,"dname":"4c7c829a-00b6-4892-ad4a-2cb6301a0812","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### fileAttachment.json()\nReturns a promise to the file's contents, parsed as JSON into JavaScript values.`","pinCode":false,"dname":"18d230f0-9515-4e31-b2bd-d471a0aadae5","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nconst logs = await FileAttachment(\"weekend-logs.json\").json();\n\\`\\`\\``","pinCode":false,"dname":"2f5c6e2d-c926-4500-9751-48e8b8201819","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### fileAttachment.stream()\nReturns a promise to a [ReadableStream](https://developer.mozilla.org/en-US/docs/Web/API/Streams_API) of the file's contents.`","pinCode":false,"dname":"d0ca65da-710b-4db7-a73f-64edf9e475f2","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nconst stream = await FileAttachment(\"metrics.csv\").stream();\nconst reader = stream.getReader();\nlet done, value;\nwhile (({done, value} = await reader.read()), !done) {\n  yield value;\n}\n\\`\\`\\``","pinCode":false,"dname":"1493f78d-23e9-4cfa-8cec-fea228986839","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### fileAttachment.text()\nReturns a promise to the file's contents as a JavaScript string.`","pinCode":false,"dname":"005fb04e-1672-43a7-b545-658ed3526c89","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nconst hello = await FileAttachment(\"hello.txt\").text();\n\\`\\`\\``","pinCode":false,"dname":"02ebd396-d1c3-4c47-812e-3780b7654dff","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### fileAttachment.tsv({_array_ = false, _typed_ = false} = {})\nReturns a promise to the file’s contents, parsed as tab-separated values (CSV) into an array.`","pinCode":false,"dname":"8c8f40ef-f987-4e66-ac5d-c2f739f95c9f","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nconst data = await FileAttachment(\"cars.tsv\").tsv();\n\\`\\`\\``","pinCode":false,"dname":"45efaa19-a927-47bd-bf03-b150f08996a3","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`If _array_ is true, an array of arrays is returned; otherwise, the first row is assumed to be the header row and an array of objects is returned, and the returned array has a _data_.\\`columns\\` property that is an array of column names. (See [\\`d3.csvParseRows\\`](https://github.com/d3/d3-dsv/blob/master/README.md#dsv_parseRows).) If _typed_ is true, [automatic type inference](https://observablehq.com/@d3/d3-autotype) is applied; only use this feature if you know your data is compatible.`","pinCode":false,"dname":"3a03f990-3726-4d79-ab68-e3b25f3c37c1","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"fileAttachmentUrlSection = (md `### fileAttachment.url()\nReturns a promise to the URL at which the file may be retrieved.`)","pinCode":false,"dname":"5466d3fc-61e0-4f9b-91eb-4fcd3e904a59","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nconst url = await FileAttachment(\"file.txt\").url();\n\\`\\`\\``","pinCode":false,"dname":"ad9fd6b2-d4b3-4c92-ab57-6497d8ec0fa0","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"fileAttachmentXLSXSection = (md `### fileAttachment.xlsx()\nReturns an array of sheetnames from a given XLSX file.`)","pinCode":false,"dname":"9df211b1-25cd-4d2e-b8d8-9b1eba05fcdf","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"workbook = (FileAttachment(\"Laser_Report_2020.xlsx\").xlsx())","pinCode":false,"dname":"b3177d3c-3546-4a17-8c12-9aa0c8011bf0","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`See ${Link(\"xlsx/xlsx\",\"FileAttachment.xlsx\")} for examples and more explanation.`","pinCode":false,"dname":"ddff1ba9-0519-4dcc-8cd9-00d298584988","codeMode":"javascript2","vimEnabled":false,"insertMode":false}}},{"type":"codeTool","data":{"codeData":{"value":"fileAttachmentZipSection = (md `### fileAttachment.zip()\nReturns an array of filenames from a given ZIP archive.`)","pinCode":false,"dname":"9a63bb5f-e74b-4551-8705-63fdf99a63c5","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"dogZip = (FileAttachment(\"Dog_Photos.zip\").zip())","pinCode":false,"dname":"f50dc4fb-fac4-4a2f-b754-e2443bdddb44","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`See [FileAttachment.zip](https://observablehq.com/@observablehq/zip) for examples and more explanation.`","pinCode":false,"dname":"dff1d01a-d25d-4b20-a52e-7b46b3e09d9e","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Note that the \\`Files.text()\\`, \\`Files.url()\\`, and \\`Files.buffer()\\` methods in [Reading Local Files](https://observablehq.com/@mbostock/reading-local-files) are deprecated now.`","pinCode":false,"dname":"fe7d0093-9e46-4f63-ac04-eb574cc0bed8","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"generatorsSection = (md `## Generators\nUse the methods in this section to create generators. (See [Introduction to Generators](https://observablehq.com/@observablehq/introduction-to-generators) for an explanation of what generators are used for.)\n`)","pinCode":false,"dname":"02375e87-ef0c-43c0-8b7c-3aeecf3e6f91","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"generatorsInputSection = (md ` ### Generators.input(_input_)\nNote: Consider using the [\\`viewof\\`](https://observablehq.com/@observablehq/introduction-to-views) operator. \n\nReturns a new generator that yields promises to the current value of the specified _input_ element; each promise resolves when the _input_ element emits an event. (The promise resolves when the event is emitted, even if the value of the input is unchanged.) If the initial value of the _input_ is not undefined, the returned generator’s first yielded value is a resolved promise with the initial value of the _input_.\n`)","pinCode":false,"dname":"18aa0bd2-597c-40b9-b2fc-13b7ab9db06a","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`The type of event that triggers promise resolution depends on the _input_ type as follows:\n- For button, submit, and checkbox inputs, _click_ events.\n- For file inputs, _change_ events.\n- For all other types, _input_ events.\n\nThe resolved value is likewise dependent on the _input_.\\`type\\` as follows:\n- For range and number inputs, _input_.\\`valueAsNumber\\`.\n- For date inputs, _input_.\\`valueAsDate\\`.\n- For checkbox inputs, _input_.\\`checked\\`.\n- For single-file inputs (_input_.\\`multiple\\` is falsey), _input_.\\`files[0]\\`.\n- For multi-file inputs (_input_.\\`multiple\\` is truthy), _input_.\\`files\\`.\n- For all other types, _input_.\\`value\\`.\n  \nThe specified _input_ need not be an \\`HTMLInputElement\\`, but it must support the _target_.\\`addEventListener\\` and _target_.\\`remoteEventListener\\` methods of the [\\`EventTarget\\`](https://developer.mozilla.org/docs/Web/API/EventTarget/addEventListener) interface.\n\n\\`Generators.input\\` is used by Observable’s [\\`viewof\\` operator](https://observablehq.com/@observablehq/introduction-to-views) to define the current value of a view, and is based on [\\`Generators.observe\\`](#generatorsObserveSection). Usually you do not use \\`Generators.input\\` directly, but it can be used to define a [generator cell](https://observablehq.com/@observablehq/generator-cells-functions-and-objects) exposing the current value of an input, and you can also read the yielded values by hand. For example, to accumulate the first four values:`","pinCode":false,"dname":"1d8f809f-8f18-4481-a488-69135f133818","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\n{\n  const values = [];\n  for (const value of Generators.input(element)) {\n    if (values.push(await value) >= 4) {\n      return values;\n    }\n  }\n}\n\\`\\`\\``","pinCode":false,"dname":"25fd919e-bed3-4516-91a0-9b23c09ecffc","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`Generators.input\\` is lossy and may skip values: if more than one event is emitted before the next promise is pulled from the generator (more than once per animation frame), then the next promise returned by the generator will be resolved with the latest input value, potentially skipping intermediate values. See [\\`Generators.queue\\`](#generatorsQueueSection) for a non-debouncing generator.`","pinCode":false,"dname":"959a0181-38ef-4dca-9ba0-431c20a9e681","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"generatorsObserveSection = (md ` ### Generators.observe(_initialize_)\nReturns a generator that yields promises to an observable value, adapting a push-based data source (such as an [\\`Observable\\`](https://github.com/tc39/proposal-observable/blob/master/README.md), an [\\`EventEmitter\\`](https://nodejs.org/api/events.html#events_class_eventemitter) or an [\\`EventTarget\\`](https://developer.mozilla.org/docs/Web/API/EventTarget)) to a pull-based one.\n`)","pinCode":false,"dname":"c3443899-03e8-4a02-8441-6aab37e497bc","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`The specified _initialize_ function is invoked before \\`Generators.observe\\` returns, being passed a _change_ function; calling _change_ triggers the resolution of the current promise with the passed value. The _initialize_ function may also return a _dispose_ function; this function will be called when the generator is [disposed](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Generator/return). (See [invalidation](#invalidationSection).)\n\nFor example, to observe the current value of a text input element, you might say:`","pinCode":false,"dname":"a39c3221-e14a-4c49-8ab4-d34dc49652fe","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nGenerators.observe(change => {\n\n  // An event listener to yield the element’s new value.\n  const inputted = () => change(element.value);\n\n  // Attach the event listener.\n  element.addEventListener(\"input\", inputted);\n\n  // Yield the element’s initial value.\n  change(element.value);\n\n  // Detach the event listener when the generator is disposed.\n  return () => element.removeEventListener(\"input\", inputted);\n})\n\\`\\`\\``","pinCode":false,"dname":"c5f41410-d98d-4a5b-8efa-9264403e32bb","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`(See also [\\`Generators.input\\`](#generatorsInputSection).)`","pinCode":false,"dname":"a42ea1c5-270b-4f53-acb2-c62cbcb33054","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`Generators.observe\\` is typically used to define a [generator cell](https://observablehq.com/@mbostock/generator-cells-functions-and-objects), but you can also read the yielded values by hand. For example, to accumulate the first four values:`","pinCode":false,"dname":"8690a9ec-cb7e-42e7-a695-203dbd8aad47","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\n{\n  const generator = Generators.observe(…);\n  const values = [];\n  for (const value of generator) {\n    if (values.push(await value) >= 4) {\n      return values;\n    }\n  }\n}\n\\`\\`\\``","pinCode":false,"dname":"edb47497-3e5d-4c3d-bcf8-ba30101b83be","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`Generators.observe\\` is lossy and may skip values: if _change_ is called more than once before the next promise is pulled from the generator (more than once per animation frame), then the next promise returned by the generator will be resolved with the latest value passed to _change_, potentially skipping intermediate values. See [\\`Generators.queue\\`](#generatorsQueueSection) for a non-debouncing generator.`","pinCode":false,"dname":"760bdfb7-0f20-4c1f-8fb2-0a579fa62fda","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"generatorsQueueSection = (md ` ### Generators.queue(_initialize_)\nReturns a generator that yields promises to an observable value, adapting a push-based data source (such as an [\\`Observable\\`](https://github.com/tc39/proposal-observable/blob/master/README.md), an [\\`EventEmitter\\`](https://nodejs.org/api/events.html#events_class_eventemitter) or an [\\`EventTarget\\`](https://developer.mozilla.org/docs/Web/API/EventTarget)) to a pull-based one.\n`)","pinCode":false,"dname":"4f0e76e8-67f4-4113-a2cc-89c6da52b304","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`The specified _initialize_ function is invoked before \\`Generators.queue\\` returns, being passed a _change_ function; calling _change_ triggers the resolution of the current promise with the passed value. The _initialize_ function may also return a _dispose_ function; this function will be called when the generator is [disposed](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Generator/return). (See [invalidation](#invalidationSection).)\n\nFor example, to observe the current value of a text input element, you might say:`","pinCode":false,"dname":"446a6dcf-2061-40a0-ad9c-64c9168db6d8","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nGenerators.queue(change => {\n\n  // An event listener to yield the element’s new value.\n  const inputted = () => change(element.value);\n\n  // Attach the event listener.\n  element.addEventListener(\"input\", inputted);\n\n  // Yield the element’s initial value.\n  change(element.value);\n\n  // Detach the event listener when the generator is disposed.\n  return () => element.removeEventListener(\"input\", inputted);\n})\n\n\\`\\`\\``","pinCode":false,"dname":"765832f9-c08e-457c-97e7-1e805b6f7664","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`(See also [\\`Generators.input\\`](#generatorsInputSection).)`","pinCode":false,"dname":"4c4a8f5a-8d99-4da6-b198-9b2d0cae720c","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`Generators.queue\\` is typically used to define a [generator cell](https://observablehq.com/@mbostock/generator-cells-functions-and-objects), but you can also read the yielded values by hand. For example, to accumulate the first four values:`","pinCode":false,"dname":"e7ea3cb8-1266-465a-8559-4a27539703a7","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\n{\n  const generator = Generators.queue(…);\n  const values = [];\n  for (const value of generator) {\n    if (values.push(await value) >= 4) {\n      return values;\n    }\n  }\n}\n\\`\\`\\``","pinCode":false,"dname":"f6f0031f-6e51-4324-906b-365930313b3d","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`Generators.queue\\` is non-lossy and, as a result, may yield “stale” values: if _change_ is called more than once before the next promise is pulled from the generator (more than once per animation frame), the passed values are queued in order and the generator will return resolved promises until the queue is empty again. See [\\`Generators.observe\\`](#generatorsObserveSection) for a debouncing generator.`","pinCode":false,"dname":"d5cedb63-061c-411c-a933-537c46674002","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`See [Introduction to Generators](https://observablehq.com/@observablehq/introduction-to-generators) for examples and more explanation.`","pinCode":false,"dname":"b9601009-be3c-446e-9333-b44dbd99f489","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"htmlSection = (md `## html \\`\\`\\` \\`string\\` \\`\\`\\` (Create an HTML element)`)","pinCode":false,"dname":"935a6997-8e9b-4437-9129-bbcc4986284a","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Use \\`html\\` to create an HTML element. For example, to create an H3 element whose content is \"Hello, world!\":\n`","pinCode":false,"dname":"1d9cc1ec-9e44-43cd-bfbe-9b24562d7e29","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"html`<h3>Hello, world!`","pinCode":false,"dname":"54dd6020-5a9e-47ec-963a-fa23ec8ef898","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`The \\`html\\` function returns the HTML element represented by the specified HTML [_string literal_](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types#string_literals). The function is intended to be used as a [tagged template literal](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Template_literals#Tagged_template_literals_and_escape_sequences). Leading and trailing whitespace is automatically trimmed. `","pinCode":false,"dname":"cbb3af10-1a94-4804-b37c-063e2b03bc6d","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`(Note: The \\`html\\` function is supported, but consider using [htl.html](https://observablehq.com/@observablehq/htl) or the HTML [cell mode](https://observablehq.com/@observablehq/cell-modes), which allows you to type HTML code without the \\`html\\` keyword and without needing to enclose the text in backticks.)`","pinCode":false,"dname":"5540998e-0a42-4e53-9bd6-470794e24553","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`If the resulting HTML fragment is not a single HTML element or node, it is wrapped in a DIV element. For example, consider the following expression:`","pinCode":false,"dname":"5e90da97-e4af-4e32-a99f-a73f12bbdf70","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"html`Hello, <b>world</b>!`","pinCode":false,"dname":"6515db35-d240-4e70-82b1-c7706fa77d1f","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`This expression is equivalent to the next expression:`","pinCode":false,"dname":"b089a5fc-a9a0-4023-adee-0a2d8c590f48","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"html`<div>Hello, <b>world</b>!</div>`","pinCode":false,"dname":"52f60522-21d7-42a6-bbdd-452fc7fd931c","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`If an embedded expression is a DOM element, it is embedded in generated HTML. For example, to embed TeX within HTML:`","pinCode":false,"dname":"af0fa939-0526-4a70-b41e-25ac77fbb0b9","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"html`I like ${tex`\\KaTeX`} for math.`","pinCode":false,"dname":"f87f4b3d-338d-4db4-82e5-fecfddfe7a17","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`If an embedded expression is an array, the elements of the array are embedded in the generated HTML. For example, to create a table from an array of values:`","pinCode":false,"dname":"68e9516a-310d-47a3-8a44-84148e985dd1","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"html`<table>\n  <tbody>${[\"zero\", \"one\", \"two\"].map((name, i) => html`<tr>\n    <td>${name}</td><td>${i}</td>\n  </tr>`)}</tbody>\n</table>`","pinCode":false,"dname":"3636996d-f0db-45ce-b621-67b61c9b9eb0","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`A few more examples:`","pinCode":false,"dname":"d8d694c5-3bec-4241-a729-5cab730443e3","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"html`<span style=\"background:yellow;\">\n  Use a <span> element to set the background color.\n</span>`","pinCode":false,"dname":"97e2ff2b-3f66-426f-8e0f-74499a0f40c1","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"html`<input type=range min=0 max=10 step=1>`","pinCode":false,"dname":"b7eaf0d8-3e13-43ae-83cf-f369e38ae645","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"html`<select>\n  <option>one</option>\n  <option>two</option>\n  <option>three</option>\n</select>`","pinCode":false,"dname":"6cb3161e-41b4-41ec-ae74-fd742601df51","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"invalidationSection = (md ` ## invalidation\nTo free up resources when a cell is re-evaluated, such as cancelling timers or disposing WebGL contexts, use the \\`invalidation\\` promise. This promise resolves when the current cell is re-evaluated: when the cell’s code changes, when it is run using Shift-Enter, or when a referenced input changes. This promise is typically used to dispose of resources that were allocated by the cell. For example, to abort a fetch if the cell is invalidated:\n`)","pinCode":false,"dname":"e9cfedcc-4b13-49e7-8cfd-64c144cfa43b","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\n{\n  const controller = new AbortController;\n  invalidation.then(() => controller.abort());\n  const response = await fetch(url, {signal: controller.signal});\n  return response.json();\n}\n\\`\\`\\``","pinCode":false,"dname":"fd10d2b0-a781-4930-a85d-152b83775bee","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`The invalidation promise is provided by the runtime rather than the standard library, because it resolves to a new promise each time a cell is evaluated.\n\nSee [Invalidation](https://observablehq.com/@observablehq/invalidation) for examples and more explanation.`","pinCode":false,"dname":"995b5f45-cfa9-4d9e-9ae7-db5046ba3682","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"mdSection = (md `## md \\`\\`\\` \\`string\\` \\`\\`\\` (Write Markdown code) `)","pinCode":false,"dname":"3e386136-2f0f-489b-95e7-218ca337b518","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Note: The \\`md\\` function is supported, but consider using the Markdown [cell mode](https://observablehq.com/@observablehq/cell-modes), which allows you to type Markdown code without the \\`md\\` keyword and without needing to enclose the text in backticks.`","pinCode":false,"dname":"aa392119-4fdc-4778-ae62-338fa96d728b","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`The \\`md\\` function returns the HTML element represented by the specified Markdown [_string literal_](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types#string_literals). For example, to create an H3 element whose content is “Hello, world!”:`","pinCode":false,"dname":"051d3854-f7e6-4d5e-a78d-48ea1f64d6df","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### Hello, world!`","pinCode":false,"dname":"2c8a7106-47c6-43cd-9495-0172a250612d","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`The Markdown compiler used is [Marked](https://marked.js.org). Leading and trailing whitespace is automatically trimmed.`","pinCode":false,"dname":"5ce12c9c-e4ac-452d-a385-4672b562d1c0","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`If an embedded expression is a DOM element, it is embedded in generated HTML. For example, to embed [LaTeX](#texSection) within Markdown:`","pinCode":false,"dname":"2900a6f5-1365-4749-a5f4-b54bead19297","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`My *favorite* number is ${tex`\\tau`}.`","pinCode":false,"dname":"3b089643-62d7-4a82-b63f-5c46805d77ec","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`If an embedded expression is an array, the elements of the array are embedded in the generated HTML. The elements may either be strings, which are interpreted as Markdown, or DOM elements. For example, given the following array of data:`","pinCode":false,"dname":"aa9125bd-003f-4c5b-8c37-b919ee478920","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"elements = ([\n  {symbol: \"Co\", name: \"Cobalt\", number: 27},\n  {symbol: \"Cu\", name: \"Copper\", number: 29},\n  {symbol: \"Sn\", name: \"Tin\", number: 50},\n  {symbol: \"Pb\", name: \"Lead\", number: 82}\n])","pinCode":false,"dname":"ef534673-a324-411f-924a-43952fe14298","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`To create a table from the previous array of data, you would use the following Markdown code:`","pinCode":false,"dname":"3c6e733a-df87-4fd6-acda-e8b91b30776c","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\n| Name      | Symbol      | Atomic number |\n|-----------|-------------|---------------|${elements.map(e => `\n| ${e.name} | ${e.symbol} | ${e.number}   |`)}\n`","pinCode":false,"dname":"dc5450be-c073-4fb1-876f-d5beb43b87bf","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"nowSection = (md ` ## now`)","pinCode":false,"dname":"ee079050-216d-4833-9945-35e85b040487","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`A reactive variable that returns the current value of \\`Date.now\\`.`","pinCode":false,"dname":"f40af2b6-0d3e-41a4-a7bd-021c5b4a39be","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"now","pinCode":false,"dname":"489a3fae-bb4d-4bcc-b3a3-f48ec9da110b","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`To display the current time in a Markdown string:`","pinCode":false,"dname":"94a52dc8-6093-4b03-a452-9099d6d46374","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`The current time is: ${new Date(now).toISOString()}`","pinCode":false,"dname":"2f647d30-10e7-4e59-97cb-58fa5a6ec615","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"promisesSection = (md ` ## Promises`)","pinCode":false,"dname":"85db9e7d-161c-4e04-a142-d8bd6687ac6e","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"promisesDelaySection = (md `### Promises.delay(_duration_[, _value_])\nReturns a promise that resolves with the specified _value_ after the specified _duration_ in milliseconds. For example, to define a cell that increments approximately every second:\n`)","pinCode":false,"dname":"d7a15900-7c86-4142-bad2-055bf046ff1e","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\ni = {\n  let i = 0;\n  yield i;\n  while (true) {\n    yield Promises.delay(1000, ++i);\n  }\n}\n\\`\\`\\``","pinCode":false,"dname":"b4c4e923-709b-412a-9f64-cbb3b54e0185","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`If you desire precise synchronization, such as a timer that ticks exactly every second, use [\\`Promises.tick\\`](#promisesTickSection) instead of \\`Promises.delay\\`.`","pinCode":false,"dname":"51723b85-08ce-40d8-830c-0fe3d621ae6c","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"promisesTickSection = (md `### Promises.tick()`)","pinCode":false,"dname":"476e7c2f-44b2-4456-9aec-e2e0b5aa9f2a","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Returns a promise that resolves with the specified _value_ at the next integer multiple of _milliseconds_ since the UNIX epoch. This is much like [\\`Promises.delay\\`](#promisesDelaySection), except it allows promises to be synchronized. For example, to define a cell that increments every second, on the second:`","pinCode":false,"dname":"f954902b-d439-4506-9e31-1ada0e778eca","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\ni = {\n  let i = 0;\n  yield i;\n  while (true) {\n    yield Promises.tick(1000, ++i);\n  }\n}\n\\`\\`\\``","pinCode":false,"dname":"35878c3d-6274-4191-b6a2-3d143568f161","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Or, to define a cell that is an async generator:`","pinCode":false,"dname":"54f528d5-8750-43cf-9d81-91d63e6c9b3c","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\ni = {\n  let i = 0;\n  while (true) {\n    yield i++;\n    await Promises.tick(1000);\n  }\n}\n\\`\\`\\``","pinCode":false,"dname":"54d531e6-6d58-4045-aa4f-23ccb1d241e3","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### Promises.when(_date_[, _value_])\nReturns a promise that resolves with the specified value at the specified date. This method relies on [\\`setTimeout\\`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout), and thus the specified date must be no longer than 2,147,483,647 milliseconds (24.9 days) from now.`","pinCode":false,"dname":"4cbdb854-8501-4127-b2e7-5eecd138c06b","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"requireSection = (md `## require (Load third-party libraries)\n- \\`require.resolve()\\`\n- \\`require.alias()\\`\n\nThese are supported, but consider using [dynamic import](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import).\n`)","pinCode":false,"dname":"778ebf89-b454-414a-97a6-abfe94a29ba1","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### require(_names...)`","pinCode":false,"dname":"4dbb4493-1038-48c0-a111-d54867cd2849","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Returns a promise of the [asynchronous module definition](https://github.com/amdjs/amdjs-api/blob/master/AMD.md) (AMD) with the specified names, loaded from [\\`jsDelivr\\`](https://jsdelivr.com/). Each module name can be a package (or scoped package) name optionally followed by the at sign (@) and a semver range. For example, to load [\\`d3-array\\`](https://github.com/d3/d3-array):`","pinCode":false,"dname":"420d81af-073f-4051-8c43-9a0eb3e59824","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nd3 = require(\"d3-array\")\n\\`\\`\\``","pinCode":false,"dname":"7b6b680f-138e-4601-b710-1038abeb9bad","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Or, to load [\\`d3-array\\`](https://github.com/d3/d3-array) and [\\`d3-color\\`](https://github.com/d3/d3-color) and merge them into a single object:`","pinCode":false,"dname":"71cf2719-98af-4729-b2b7-9d0cfb71f570","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nd3 = require(\"d3-array\", \"d3-color\")\n\\`\\`\\``","pinCode":false,"dname":"3655f07d-b7d7-4a88-b567-4d0d9fc4152c","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Or, to load [\\`d3-array\\`](https://github.com/d3/d3-array) 1.1x:`","pinCode":false,"dname":"bfc548dd-027f-4c87-b670-f9c83cadd394","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nd3 = require(\"d3-array@1.1\")\n\\`\\`\\``","pinCode":false,"dname":"d37e52a3-1cbf-45f5-9d5d-2ae0c0bcbc99","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`See [\\`d3-require\\`](https://github.com/d3/d3-require) for more information.`","pinCode":false,"dname":"af266444-e57a-437c-bcd7-6fcf03876507","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### require.resolve(_name_)`","pinCode":false,"dname":"3165b658-8f33-4721-ac2c-89e7be86cfde","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Returns a promise to the resolved URL to require the module with the specified _name_. For example:`","pinCode":false,"dname":"5da3132a-d82e-4606-944c-e51faf7915a5","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nrequire.resolve(\"d3-array\") // \"https://cdn.jsdelivr.net/npm/d3-array@2.0.3/dist/d3-array.min.js\"\n\\`\\`\\``","pinCode":false,"dname":"2ef70bae-ec31-4334-898b-8311d1701fad","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### require.alias(_aliases_)`","pinCode":false,"dname":"09ed1ba2-089b-44cc-94dd-856f84bde936","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Returns a [require function](#requireSection) with the specified _aliases_. For each key in the specified _aliases_ object, any require of that key is substituted with the corresponding value. For example:`","pinCode":false,"dname":"d6c0d7d6-66fd-4326-9c03-d7d169fe572a","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nReact = require(\"react@16/umd/react.production.min.js\")\n\\`\\`\\``","pinCode":false,"dname":"281ea602-0d5e-4e31-9aee-e3dd273ce399","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nReactDOM = require(\"react-dom@16/umd/react-dom.production.min.js\")\n\\`\\`\\``","pinCode":false,"dname":"08b13230-ac02-447e-b9d8-a26d1da6f50c","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nSemiotic = require.alias({\"react\": React, \"react-dom\": ReactDOM})(\"semiotic@1\")\n\\`\\`\\``","pinCode":false,"dname":"941e580d-75b2-4f73-bd25-546539c053b6","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Equivalently:`","pinCode":false,"dname":"8aa3709e-0128-4e57-8db4-b0fb59d7d337","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nr = require.alias({\n  \"react\": \"react@16/umd/react.production.min.js\",\n  \"react-dom\": \"react-dom@16/umd/react-dom.production.min.js\",\n  \"semiotic\": \"semiotic@1\"\n})\n\\`\\`\\``","pinCode":false,"dname":"fdbd4f89-8c0c-4969-b394-0d9cf5774220","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Then to require the libraries:`","pinCode":false,"dname":"f89b8421-5f8d-403f-b65b-06088912b9fe","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nReact = r(\"react\")\n\\`\\`\\``","pinCode":false,"dname":"c183fa9c-5cee-47e4-8b0e-739579c70830","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nReactDOM = r(\"react-dom\")\n\\`\\`\\``","pinCode":false,"dname":"a4383942-a473-42e8-acf1-f46027b6cc74","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`JavaScript\nSemiotic = r(\"semiotic\")\n\\`\\`\\``","pinCode":false,"dname":"8ede9e9c-52f7-42b5-82c3-0fbdf155db89","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"secretsSection = (md`## Secrets\nSecrets are name-value pairs that you can use in your private notebooks to access private data. By specifying secrets in your Settings, you can enable your notebooks to use API keys or other sensitive data without making the API keys or sensitive data public.\n\nSee [Introduction to Secrets](https://observablehq.com/@observablehq/secrets) for examples and more explanation.\n`)","pinCode":false,"dname":"e2f2694a-4e4b-4d6a-a009-618ebbc85483","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"svgSection = (md `## SVG \\`\\`\\` \\`string\\` \\`\\`\\` (Create an SVG element)`)","pinCode":false,"dname":"05a1f96c-fe6f-4a83-bfb0-f26881f751e9","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md `Returns the SVG element represented by the specified SVG [_string literal_](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types#string_literals). This function is intended to be used as a [tagged template literal](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Template_literals#Tagged_template_literals_and_escape_sequences). Leading and trailing whitespace is automatically trimmed. For example, to create an SVG element whose content is a circle:`","pinCode":false,"dname":"a1f4c4eb-cee1-4290-b6e8-5ca5d073a808","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"svg`<svg width=16 height=16>\n  <circle cx=8 cy=8 r=4></circle>\n</svg>`","pinCode":false,"dname":"18e184ed-937b-4284-983d-ecc382ea565d","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`If the resulting SVG fragment is not a single SVG element, it is wrapped in a \\`<g>\\`/\\`</g>\\` element. For example, consider this expression:`","pinCode":false,"dname":"79a7a369-e999-4a1c-b3e5-cd2a95c26a74","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"svg`\n<circle cx=8 cy=4 r=4></circle>\n<circle cx=8 cy=8 r=4></circle>\n`","pinCode":false,"dname":"083caea1-faef-429a-9867-9569c9f093c6","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`The previous expression is equivalent to the next expression:`","pinCode":false,"dname":"db462302-0eac-4e13-bb78-4c4af250fab7","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"svg`<g>\n  <circle cx=8 cy=4 r=4></circle>\n  <circle cx=8 cy=8 r=4></circle>\n</g>`","pinCode":false,"dname":"93ba812a-0931-49f6-98f1-b6d83b625886","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`If an embedded expression is a DOM element, it is embedded in generated SVG. If an embedded expression is an array, the elements of the array are embedded in the generated SVG.`","pinCode":false,"dname":"897fbbc9-d292-4d39-823a-ccf52a43a62c","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`The following expression creates an SVG image with text:`","pinCode":false,"dname":"ca85da8f-49fa-4834-b6fa-2939d871f46d","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"svg`<svg width=${width} height=27>\n  <text y=22>Hello, I am an SVG image!</text>\n</svg>`","pinCode":false,"dname":"a65349d4-504d-4355-93cd-df84a15eeed3","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"texSection = (md ` ## tex \\`\\`\\` \\`string\\` \\`\\`\\`  (Write LaTeX code)`)","pinCode":false,"dname":"dac320b1-d517-4b2c-be91-4fac7eeeeed8","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Note: The \\`tex\\` function is supported, but consider using the TeX [cell mode](https://observablehq.com/@observablehq/cell-modes), which allows you to type TeX code without the \\`tex\\` keyword and without needing to enclose the text in backticks.`","pinCode":false,"dname":"f53cd025-b707-4857-91c9-f731069d09c4","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Returns the HTML element represented by the specified LaTeX [_string literal_](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_types#string_literals). Implemented by [KaTeX](https://github.com/Khan/KaTeX).`","pinCode":false,"dname":"f808273f-2607-4ad2-a5b3-f61df53f91af","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"tex`E = mc^2`","pinCode":false,"dname":"9b786308-cd43-4e0c-a73d-891c17a9589c","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"tex`\nf(x) = \\int_{-\\infty}^\\infty\n    \\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\n    \\,d\\xi\n`","pinCode":false,"dname":"f60bd9b6-40d8-4492-8215-a6a79fa629d7","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### tex.block \\\\\\`string\\\\\\``","pinCode":false,"dname":"2aba0c73-e7ef-40f8-b98a-a7b612dc1de8","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Equivalent to [\\`tex\\`](#texSection), but uses KaTeX’s display mode to produce a bigger block element rather than a smaller inline element.`","pinCode":false,"dname":"42a24837-0559-43eb-b718-ed1760d9d31f","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"tex.block`E = mc^2`","pinCode":false,"dname":"e2b58598-a755-42b6-b13e-40db641b23e4","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"tex.block`\nf(x) = \\int_{-\\infty}^\\infty\n    \\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\n    \\,d\\xi\n`","pinCode":false,"dname":"f8eb1630-e795-4b2d-a9b3-dcc84e8a563b","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### tex.options(_options_)`","pinCode":false,"dname":"e96b31cd-15fb-4c5e-861a-0a4d5fa3e011","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`Returns a function equivalent to [\\`tex\\`](#texSection), but with the specified _options_.`","pinCode":false,"dname":"cf92d9c3-4151-437b-96ae-e58d116d2f2c","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"tex.options({displayMode: true})`E = mc^2`","pinCode":false,"dname":"db3aee1d-da42-4368-8c78-eb935229cd6e","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"visibilitySection = (md ` ## visibility\nVisibility is a special kind of promise that resolves when a cell becomes visible. If, for example, you want animation to run only after a cell has scrolled into view, you can do that using \\`visibility()\\`.\n\nThe visibility function is provided by the runtime rather than the standard library because it resolves to a different function for each cell.\nAn example of using \\`visibility\\` as part of a \\`fadeIn\\` function follows, along with an example of the effect:\n`)","pinCode":false,"dname":"5116c63e-ce95-4cc9-8e16-27a7ec4d0fc4","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"fadeIn = (function fadeIn(element, visibility) {\n  element.style.color = \"transparent\";\n  element.style.willChange = \"color\";\n  element.style.transition = \"color 2.5s linear\";\n  visibility().then(() => (element.style.color = \"inherit\"));\n  return element;\n})","pinCode":false,"dname":"86ffe05c-32ac-4353-a39f-fc705cbed5bd","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`The following paragraph (from [A Christmas Carol](https://www.gutenberg.org/files/46/46-h/46-h.htm#link1)) fades in when the page is first scrolled:`","pinCode":false,"dname":"d2d69550-3d39-4033-914a-2534e853b881","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"fadeIn(md`The idea being an alarming one, he scrambled out of bed, and groped his way to the window. He was obliged to rub the frost off with the sleeve of his dressing-gown before he could see anything; and could see very little then. All he could make out was, that it was still very foggy and extremely cold, and that there was no noise of people running to and fro, and making a great stir, as there unquestionably would have been if night had beaten off bright day, and taken possession of the world...`, visibility)","pinCode":false,"dname":"efd63885-e4b1-4451-abf5-9fc52cc5d48e","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`See [Awaiting Visibility](https://observablehq.com/@observablehq/visibility) for more examples and explanation.`","pinCode":false,"dname":"4385bdbb-c35b-4ee1-95d4-7663e5815786","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"widthSection = (md ` ## width`)","pinCode":false,"dname":"1a96f71c-6cf0-4150-a654-8b959aeb7a62","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`A reactive variable that returns the current page width.`","pinCode":false,"dname":"ade324b7-e5df-421c-a7c9-b891e5405865","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"width","pinCode":false,"dname":"c1e167bd-4a81-483b-bd62-d9fb88191fe2","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`To make a rounded rectangle in SVG that resizes to fit the page:`","pinCode":false,"dname":"1f8bc034-ad5e-428b-8827-74fdd7e05c67","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`\\`\\`\\`\nhtml\\`<svg width=${width} height=200>\n  <rect width=${width} height=200 rx=10 ry=10></rect>\n</svg>\\`\n\\`\\`\\``","pinCode":false,"dname":"5c7fc320-e6cf-49d4-b901-e54028627158","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"additionalLibrariesSection = (md ` ## Recommended Libraries\nObservable also includes and recommends the following additional libraries (some are third-party).\n\n[Recommended Libraries](https://observablehq.com/@observablehq/recommended-libraries?collection=@observablehq/libraries)\n\n`)","pinCode":false,"dname":"00b54769-14a9-4b69-8e8e-7d029381d126","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"deprecatedSection = (md`## Deprecated / No Longer Recommended\nThe following methods are deprecated and are no longer recommended. Consider using the suggested substitutions.\n`)","pinCode":false,"dname":"18c28f68-914a-426f-8fa3-6efd15206417","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### DOM methods that have been deprecated\n| Name | Suggested substitution |\n|-|-|\n| DOM.**canvas**() | Deprecated; use htl.**html** | \n| DOM.**download**() | Deprecated; use the cell menu or **Blob** |\n| DOM.**element**() | Deprecated; use htl.**html** |\n| DOM.**input**() | Deprecated; use htl.**html** or **Inputs** |\n| DOM.**range**() | Deprecated; use htl.**html** or Inputs.**range** |\n| DOM.**select**() | Deprecated; use htl.**html** or Inputs.**select** |\n| DOM.**svg**() | Deprecated; use htl.**html** |\n| DOM.**text**() | Deprecated; use htl.**html** |`","pinCode":false,"dname":"e874851c-ccf0-45aa-9fb6-dc89dc6ee60f","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### Files methods that have been deprecated\n| Name | Suggested substitution |\n|-|-|\n| Files.**buffer**() | Deprecated; use **FileAttachment** or **FileReader** |\n| Files.**text**() | Deprecated; use **FileAttachment** or **FileReader** |\n| Files.**url**() | Deprecated; use **FileAttachment** or **FileReader** |\n`","pinCode":false,"dname":"a3e62f5a-f419-49ee-a399-7487361eb5a0","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`### Generators methods that have been deprecated\n| Name | Suggested substitution |\n|-|-|\n| Generators.**disposable**() | Deprecated; use **invalidation** |\n| Generators.**filter**() | Deprecated; use **for** and **yield** |\n| Generators.**map**() | Deprecated; use **for** and **yield** |\n| Generators.**range**() | Deprecated; use **for** and **yield** |\n| Generators.**valueAt**() | Deprecated; use **for** |\n| Generators.**worker**() | Deprecated; use **Worker** |`","pinCode":false,"dname":"8b5d49dc-6e6a-40ba-8d6d-033037405375","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"md`## Appendix`","pinCode":false,"dname":"a0daae1f-3d63-4fa0-af57-7a34b74b9d08","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"import { MockDatabaseClient as DatabaseClient }  from 'stdlib/cc1c4f2583af6f34'","pinCode":false,"dname":"998e2cfa-388c-4e7b-b7b4-06642dc745be","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"currentUser = ({\n  login: \"person\",\n  name: \"Amaya Person\",\n  bio: \"\",\n  url: \"\",\n  avatar: \"https://avatars.observableusercontent.com/avatar/9acd0c72595fd2c8faf4b3acbd0607c1522e453416b21347125a42d7b1ccbafc\"\n})","pinCode":false,"dname":"d7244eff-38fb-4213-b9f9-95304be1b9c0","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"htl.html`<style type=\"text/css\">\n\ntd:first-child {\n  width: 35%;\n}\n\ntd {\n  white-space: nowrap;\n}\n\n</style>`","pinCode":false,"dname":"341db43f-03a7-44cf-8ad2-5c764e308d44","codeMode":"javascript2"}}}],"version":"2.19.1"}