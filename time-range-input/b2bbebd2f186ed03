{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"md`# Range Slider\n\n**Jump to:\n[Examples](#section_examples) | [Documentation](#section_docs) | [Themes](#section_themes) | [Changelog](#doc_changelog)**\n\nThis notebook implements a themable range input for lower and upper bounds.\n\n<details>\n<summary style=\"outline:none !important\"><i>View a demonstration</i></summary>\n<img src=https://i.imgur.com/KkHoemh.gif style=\"max-width:500px;border:1px solid #ddd\">\n</details>\n`","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"section_examples = (md`---\n## Examples\n\n*All* arguments and options are optional.`)","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"example_observable = (md`### Style: Observable Inputs\n\nMimics the appearance and interface of \\`Inputs.range()\\` from Observable's [Inputs library](https://observablehq.com/@observablehq/inputs). See the [documentation](#doc_interval) for a list of all available options.\n\n~~~js\nimport {interval} from '${SLUG}'\n~~~\n`)","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"interval([-10, 10], {\n  step: .25,\n  value: [0, 8],\n  label: 'My slider',\n})","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"example_jashkenas = (md`---\n### Style: Jeremy Ashkenas' Inputs\n\n***This widget has been [deprecated](https://en.wikipedia.org/wiki/Deprecation).*** *Please use [\\`interval()\\`](#example_observable) instead.*\n\n\nMimics the appearance and interface of \\`slider()\\` from Jeremy Ashkenas' [Inputs notebook](https://observablehq.com/@jashkenas/inputs). See the [documentation](#doc_rangeSlider) for a list of all available options.\n\n~~~js\nimport {rangeSlider} from '${SLUG}'\n~~~\n`)","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"rangeSlider({\n  min: -10,\n  max: 10,\n  step: .25,\n  value: [0, 8],\n  title: 'My slider',\n  description: 'This is a slider.',\n})","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"example_basic = (md`---\n### Style: Basic\n\nThe basic building block for custom sliders. See the [documentation](#doc_rangeInput) for a list of all available options.\n\n~~~js\nimport {rangeInput} from '${SLUG}'\n~~~\n`)","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"rangeInput({\n  min: -10,\n  max: 10,\n  step: .25,\n  value: [0, 8],\n})","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"section_docs = (md`---\n## Documentation`)","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"doc_interval = (signature(interval, {\n  description: md`\nWidget that imitates the appearance and API of [\\`range()\\`](https://observablehq.com/@observablehq/input-range).\n\nArguments:\n- \\`range\\`: Array of \\`[min, max]\\`. Defaults to \\`[0, 1]\\`.\n- \\`options\\`: Optional. Available options:\n${Object.entries({\n  min: 'Minimum value, number. Defaults to <code>0</code>.',\n  max: 'Maximum value, number. Defaults to <code>100</code>.',\n  step: 'Range step, number. Defaults to <code>any</code>.',\n  label: 'Input label. Defaults to `null`.',\n  format: 'Callback that receives the current value  and returns an output string. Defaults to ```([start, end]) => `${start} … ${end}` ```.',\n  value: 'Lower and upper range bounds, array of number. Optional, defaults to <code>[min, max]</code>.',\n  theme: 'Widget CSS, string. Defaults to [<code>theme_Flat</code>](#doc_theme_Flat).',\n  color: 'Range color as CSS \\`color\\` value. Defaults to the theme.',\n  width: 'Range width, either number of pixels or a CSS \\`width\\` string. Defaults to the theme.',\n}).map(([k,v]) => `  - \\`${k}:\\` ${v}\\n`)}\n\n`\n}))","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"doc_rangeInput = (signature(rangeInput, {\n  description: md`\nBasic input implementation. Supports custom themes.\n\nArguments:\n- \\`options:\\` Optional. Available options:\n${Object.entries({\n  min: 'Minimum value, number. Defaults to <code>0</code>.',\n  max: 'Maximum value, number. Defaults to <code>100</code>.',\n  step: 'Range step, number. Defaults to <code>any</code>.',\n  value: 'Lower and upper range bounds, array of number. Defaults to <code>[min, max]</code>.',\n  theme: 'Widget CSS, string. Defaults to [<code>theme_Flat</code>](#doc_theme_Flat).',\n  color: 'Range color as CSS \\`color\\` value. Defaults to the theme.',\n  width: 'Range width, either number of pixels or a CSS \\`width\\` string. Defaults to the theme.',\n}).map(([k,v]) => `  - \\`${k}:\\` ${v}\\n`)}\n\n`\n}))","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"doc_rangeSlider = (signature(rangeSlider, {\n  description: md`\n\n**Deprecated**. Use [\\`interval()\\`](#doc_interval) instead.\n\nWidget that imitates the appearance and API of [\\`slider()\\`](https://observablehq.com/@jashkenas/inputs#slider).\n\nArguments:\n- \\`options:\\` Optional. Available options:\n${Object.entries({\n      title: 'Title above widget, string. Defaults to `null`.',\n      description: 'Description below widget, string. Defaults to `null`.',\n      submit: 'Display a submit button to apply changes, boolean. Defaults to <code>false</code>.',\n      getValue: 'Value callback, Function. Defaults to <code>n => n.value.map(roundToPrecision)</code>.',\n      color: 'CSS color for range. Defaults to the theme.',\n      separator: 'Value separator. Defaults to <code>\" … \"</code>.',\n      precision: 'Number of decimals as Number. Defaults to <code>3</code>.',\n      format: 'Display format as [d3-format](https://github.com/d3/d3-format) string or Function. Defaults to <code>v => v</code>.',\n      display: 'Display formatter as Function. Defaults to <code>v => v.map(format).join(separator)</code>',\n    }).map(([k,v]) => `  - \\`${k}:\\` ${v}\\n`)}`\n\n}))","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"section_themes = (md`---\n## Themes\n`)","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"viewof example_theme_options = (Inputs.form({\n  color: Inputs.color({label: 'Range color', value: '#3b99fc'}),\n}))","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"doc_theme_Flat = (signature('theme_Flat', {\n  name: 'theme_Flat',\n  description: md`\nDefault theme. An unshaded version of [\\`theme_GoogleChrome_MacOS1013\\`](#doc_theme_GoogleChrome_MacOS1013).\n\n~~~js\nimport {theme_Flat} from '${SLUG}'\n~~~\n\n${_themeDemoInput(theme_Flat, example_theme_options, invalidation)}\n  `\n}))","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"doc_theme_GoogleChrome_MacOS1013 = (signature('theme_GoogleChrome_MacOS1013', {\n  name: 'theme_GoogleChrome_MacOS1013',\n  description: md`\nMatches the style of range inputs in Google Chrome on macOS 10.13.\n\n~~~js\nimport {theme_GoogleChrome_MacOS1013} from '${SLUG}'\n~~~\n\n${_themeDemoInput(theme_GoogleChrome_MacOS1013, example_theme_options, invalidation)}\n`\n}))","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"doc_theme_Retro1 = (signature('theme_Retro1', {\n  name: 'theme_Retro1',\n  description: md`\nMinimal theme that showcases the bare requirements.\n\n~~~js\nimport {theme_Retro1} from '${SLUG}'\n~~~\n\n${_themeDemoInput(theme_Retro1, example_theme_options, invalidation)}\n`\n}))","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"doc_theme_NoUiSlider = (signature('theme_NoUiSlider', {\n  name: 'theme_NoUiSlider',\n  description: md`\nReplicates the style of the [noUiSlider library](https://refreshless.com/nouislider/examples/).\n\n~~~js\nimport {theme_NoUiSlider} from '${SLUG}'\n~~~\n\n${_themeDemoInput(theme_NoUiSlider, example_theme_options, invalidation)}\n`\n}))","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"_themeDemoInput = {\n  const masterInput = rangeInput({value: [25, 75], theme: ''});\n  return (theme, {widget, ...options}, invalidation) => Inputs.bind(\n    rangeInput({theme, ...options}),\n    masterInput,\n    invalidation\n  );\n}","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"md`---\n## Implementation`","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"interval = (function interval(range = [], options = {}) {\n  const [min = 0, max = 1] = range;\n  const {\n    step = .001,\n    label = null,\n    value = [min, max],\n    format = ([start, end]) => `${start} … ${end}`,\n    color,\n    width,\n    theme,\n  } = options;\n\n  const __ns__ = DOM.uid('scope').id;\n  const css = `\n#${__ns__} {\n  font: 13px/1.2 var(--sans-serif);\n  display: flex;\n  align-items: baseline;\n  flex-wrap: wrap;\n  max-width: 100%;\n  width: auto;\n}\n@media only screen and (min-width: 30em) {\n  #${__ns__} {\n    flex-wrap: nowrap;\n    width: 360px;\n  }\n}\n#${__ns__} .label {\n  width: 120px;\n  padding: 5px 0 4px 0;\n  margin-right: 6.5px;\n  flex-shrink: 0;\n}\n#${__ns__} .form {\n  display: flex;\n  width: 100%;\n}\n#${__ns__} .range {\n  flex-shrink: 1;\n  width: 100%;\n}\n#${__ns__} .range-slider {\n  width: 100%;\n}\n  `;\n  \n  const $range = rangeInput({min, max, value: [value[0], value[1]], step, color, width, theme});\n  const $output = html`<output>`;\n  const $view = html`<div id=${__ns__}>\n${label == null ? '' : html`<div class=\"label\">${label}`}\n<div class=form>\n  <div class=range>\n    ${$range}<div class=range-output>${$output}</div>\n  </div>\n</div>\n${html`<style>${css}`}\n  `;\n\n  const update = () => {\n    const content = format([$range.value[0], $range.value[1]]);\n    if(typeof content === 'string') $output.value = content;\n    else {\n      while($output.lastChild) $output.lastChild.remove();\n      $output.appendChild(content);\n    }\n  };\n  $range.oninput = update;\n  update();\n  \n  return Object.defineProperty($view, 'value', {\n    get: () => $range.value,\n    set: ([a, b]) => {\n      $range.value = [a, b];\n      update();\n    },\n  });\n})","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"rangeInput = (function rangeInput(options = {}) {\n  const {\n    min = 0,\n    max = 100,\n    step = 'any',\n    value: defaultValue = [min, max],\n    color,\n    width,\n    theme = theme_Flat,\n  } = options;\n  \n  const controls = {};\n  const scope = randomScope();\n  const clamp = (a, b, v) => v < a ? a : v > b ? b : v;\n  const html = htl.html;\n\n  // Will be used to sanitize values while avoiding floating point issues.\n  const input = html`<input type=range ${{min, max, step}}>`;\n  \n  const dom = html`<div class=${`${scope} range-slider`} style=${{\n    color,\n    width: cssLength(width),\n  }}>\n  ${controls.track = html`<div class=\"range-track\">\n    ${controls.zone = html`<div class=\"range-track-zone\">\n      ${controls.range = html`<div class=\"range-select\" tabindex=0>\n        ${controls.min = html`<div class=\"thumb thumb-min\" tabindex=0>`}\n        ${controls.max = html`<div class=\"thumb thumb-max\" tabindex=0>`}\n      `}\n    `}\n  `}\n  ${html`<style>${theme.replace(/:scope\\b/g, '.'+scope)}`}\n</div>`;\n\n  let value = [], changed = false;\n  Object.defineProperty(dom, 'value', {\n    get: () => [...value],\n    set: ([a, b]) => {\n      value = sanitize(a, b);\n      updateRange();\n    },\n  });\n\n  const sanitize = (a, b) => {\n    a = isNaN(a) ? min : ((input.value = a), input.valueAsNumber);\n    b = isNaN(b) ? max : ((input.value = b), input.valueAsNumber);\n    return [Math.min(a, b), Math.max(a, b)];\n  }\n  \n  const updateRange = () => {\n    const ratio = v => (v - min) / (max - min);\n    dom.style.setProperty('--range-min', `${ratio(value[0]) * 100}%`);\n    dom.style.setProperty('--range-max', `${ratio(value[1]) * 100}%`);\n  };\n\n  const dispatch = name => {\n    dom.dispatchEvent(new Event(name, {bubbles: true}));\n  };\n  const setValue = (vmin, vmax) => {\n    const [pmin, pmax] = value;\n    value = sanitize(vmin, vmax);\n    updateRange();\n    // Only dispatch if values have changed.\n    if(pmin === value[0] && pmax === value[1]) return;\n    dispatch('input');\n    changed = true;\n  };\n  \n  setValue(...defaultValue);\n  \n  // Mousemove handlers.\n  const handlers = new Map([\n    [controls.min, (dt, ov) => {\n      const v = clamp(min, ov[1], ov[0] + dt * (max - min));\n      setValue(v, ov[1]);\n    }],\n    [controls.max, (dt, ov) => {\n      const v = clamp(ov[0], max, ov[1] + dt * (max - min));\n      setValue(ov[0], v);\n    }],\n    [controls.range, (dt, ov) => {\n      const d = ov[1] - ov[0];\n      const v = clamp(min, max - d, ov[0] + dt * (max - min));\n      setValue(v, v + d);\n    }],\n  ]);\n  \n  // Returns client offset object.\n  const pointer = e => e.touches ? e.touches[0] : e;\n  // Note: Chrome defaults \"passive\" for touch events to true.\n  const on  = (e, fn) => e.split(' ').map(e => document.addEventListener(e, fn, {passive: false}));\n  const off = (e, fn) => e.split(' ').map(e => document.removeEventListener(e, fn, {passive: false}));\n  \n  let initialX, initialV, target, dragging = false;\n  function handleDrag(e) {\n    // Gracefully handle exit and reentry of the viewport.\n    if(!e.buttons && !e.touches) {\n      handleDragStop();\n      return;\n    }\n    dragging = true;\n    const w = controls.zone.getBoundingClientRect().width;\n    e.preventDefault();\n    handlers.get(target)((pointer(e).clientX - initialX) / w, initialV);\n  }\n  \n  \n  function handleDragStop(e) {\n    off('mousemove touchmove', handleDrag);\n    off('mouseup touchend', handleDragStop);\n    if(changed) dispatch('change');\n  }\n  \n  invalidation.then(handleDragStop);\n  \n  dom.ontouchstart = dom.onmousedown = e => {\n    dragging = false;\n    changed = false;\n    if(!handlers.has(e.target)) return;\n    on('mousemove touchmove', handleDrag);\n    on('mouseup touchend', handleDragStop);\n    e.preventDefault();\n    e.stopPropagation();\n    \n    target = e.target;\n    initialX = pointer(e).clientX;\n    initialV = value.slice();\n  };\n  \n  controls.track.onclick = e => {\n    if(dragging) return;\n    changed = false;\n    const r = controls.zone.getBoundingClientRect();\n    const t = clamp(0, 1, (pointer(e).clientX - r.left) / r.width);\n    const v = min + t * (max - min);\n    const [vmin, vmax] = value, d = vmax - vmin;\n    if(v < vmin) setValue(v, v + d);\n    else if(v > vmax) setValue(v - d, v);\n    if(changed) dispatch('change');\n  };\n  \n  return dom;\n})","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"md`### Themes`","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"theme_Flat = (`\n/* Options */\n:scope {\n  color: #3b99fc;\n  width: 240px;\n}\n\n:scope {\n  position: relative;\n  display: inline-block;\n  --thumb-size: 15px;\n  --thumb-radius: calc(var(--thumb-size) / 2);\n  padding: var(--thumb-radius) 0;\n  margin: 2px;\n  vertical-align: middle;\n}\n:scope .range-track {\n  box-sizing: border-box;\n  position: relative;\n  height: 7px;\n  background-color: hsl(0, 0%, 80%);\n  overflow: visible;\n  border-radius: 4px;\n  padding: 0 var(--thumb-radius);\n}\n:scope .range-track-zone {\n  box-sizing: border-box;\n  position: relative;\n}\n:scope .range-select {\n  box-sizing: border-box;\n  position: relative;\n  left: var(--range-min);\n  width: calc(var(--range-max) - var(--range-min));\n  cursor: ew-resize;\n  background: currentColor;\n  height: 7px;\n  border: inherit;\n}\n/* Expands the hotspot area. */\n:scope .range-select:before {\n  content: \"\";\n  position: absolute;\n  width: 100%;\n  height: var(--thumb-size);\n  left: 0;\n  top: calc(2px - var(--thumb-radius));\n}\n:scope .range-select:focus,\n:scope .thumb:focus {\n  outline: none;\n}\n:scope .thumb {\n  box-sizing: border-box;\n  position: absolute;\n  width: var(--thumb-size);\n  height: var(--thumb-size);\n\n  background: #fcfcfc;\n  top: -4px;\n  border-radius: 100%;\n  border: 1px solid hsl(0,0%,55%);\n  cursor: default;\n  margin: 0;\n}\n:scope .thumb:active {\n  box-shadow: inset 0 var(--thumb-size) #0002;\n}\n:scope .thumb-min {\n  left: calc(-1px - var(--thumb-radius));\n}\n:scope .thumb-max {\n  right: calc(-1px - var(--thumb-radius));\n}\n`)","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"theme_GoogleChrome_MacOS1013 = (`\n/* Options */\n:scope {\n  color: #3b99fc;\n  width: 240px;\n}\n\n:scope {\n  position: relative;\n  display: inline-block;\n  --thumb-size: 15px;\n  --thumb-radius: calc(var(--thumb-size) / 2);\n  padding: var(--thumb-radius) 0;\n  margin: 2px;\n  vertical-align: middle;\n}\n:scope .range-track {\n  box-sizing: border-box;\n  position: relative;\n  height: 5px;\n  background-color: hsl(0, 0%, 80%);\n  box-shadow: inset 0 1px 3px -1px rgba(0,0,0,0.33);\n  overflow: visible;\n  border-radius: 3px;\n  border: 1px inset hsl(0, 0%, 70%);\n  padding: 0 var(--thumb-radius);\n}\n:scope .range-track-zone {\n  box-sizing: border-box;\n  position: relative;\n}\n:scope .range-select {\n  box-sizing: border-box;\n  position: relative;\n  left: var(--range-min);\n  width: calc(var(--range-max) - var(--range-min));\n  cursor: ew-resize;\n  background: currentColor;\n  height: 5px;\n  top: -1px;\n  border: inherit;\n}\n/* Expands the hotspot area. */\n:scope .range-select:before {\n  content: \"\";\n  position: absolute;\n  width: 100%;\n  height: var(--thumb-size);\n  left: 0;\n  top: calc(2px - var(--thumb-radius));\n}\n:scope .range-select:focus,\n:scope .thumb:focus {\n  outline: none;\n}\n:scope .thumb {\n  box-sizing: border-box;\n  position: absolute;\n  width: var(--thumb-size);\n  height: var(--thumb-size);\n\n  background: #eee linear-gradient(0deg, #fff0 50%, #fff9 50%, #fff5);\n  top: -5px;\n  border-radius: 100%;\n  border: 1px solid hsl(0,0%,55%);\n  cursor: default;\n  margin: 0;\n}\n:scope .thumb:active {\n  box-shadow: inset 0 var(--thumb-size) #0002;\n}\n:scope .thumb-min {\n  left: calc(-1px - var(--thumb-radius));\n}\n:scope .thumb-max {\n  right: calc(-1px - var(--thumb-radius));\n}\n`)","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"theme_Retro1 = (`\n/* Options */\n:scope {\n  color: #3b99fc;  \n  width: 240px;\n}\n\n:scope {\n  position: relative;\n  display: inline-block;\n  vertical-align: -10px;\n  margin: 2px;\n}\n:scope .range-track {\n  height: 20px;\n  border: 2px solid #000;\n  padding: 0 18px;\n  position: relative;\n  background: #fff url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAPUlEQVQoU2NkYGD4z8DAwMiAH/wnpACunWyFIGeAAIYB6ALYFILFiLGaaIXY3YIrlLBZjdVDIIXoAY7VQwD4rQoH9uQ3nwAAAABJRU5ErkJggg==\");\n}\n:scope .range-track-zone {\n  position: relative;\n  height: 100%;\n}\n:scope .range-select {\n  box-sizing: border-box;\n  position: relative;\n  left: var(--range-min);\n  width: calc(var(--range-max) - var(--range-min));\n  height: 100%;\n  cursor: ew-resize;\n  background: currentColor url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAK0lEQVQoU2NkwA/+g6QZqaEIbAY2k8BWIMuRrQjDmTCTMKxAVkmSIrwhAQBStQYIBYnwugAAAABJRU5ErkJggg==\") fixed;\n}\n:scope .range-select:focus,\n:scope .thumb:focus {\n  outline: none;\n}\n:scope .thumb {\n  box-sizing: border-box;\n  position: absolute;\n  height: 100%;\n  top: 0;\n  width: 20px;\n  background: #fff;\n  border: 2px solid #000;\n  border-width: 0 2px;\n  cursor: default;\n}\n:scope .thumb:active {\n  background: #000;\n}\n:scope .thumb-min {\n  left: -20px;\n}\n:scope .thumb-max {\n  right: -20px;\n}\n`)","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"theme_NoUiSlider = (`\n/* Options */\n:scope {\n  color: #3b99fc;\n  width: 240px;\n}\n\n:scope {\n  box-sizing: border-box;\n  display: inline-block;\n  vertical-align: middle;\n}\n:scope .range-track {\n  box-sizing: border-box;\n  margin: 10px 17px;\n  position: relative;\n  background: #FAFAFA;\n  border-radius: 4px;\n  border: 1px solid #D3D3D3;\n  box-shadow: inset 0 1px 1px #F0F0F0, 0 3px 6px -5px #BBB;\n  height: 18px;\n}\n:scope .range-select {\n  box-sizing: border-box;\n  position: absolute;\n  background: currentColor;\n  left: var(--range-min);\n  width: calc(var(--range-max) - var(--range-min));\n  height: 100%;\n  cursor: ew-resize;\n}\n:scope .thumb {\n  box-sizing: border-box;\n  position: absolute;\n  width: 34px;\n  height: 28px;\n  top: -6px;\n  border: 1px solid #D9D9D9;\n  border-radius: 3px;\n  background: #FFF;\n  cursor: default;\n  box-shadow: inset 0 0 1px #FFF, inset 0 1px 7px #EBEBEB, 0 3px 6px -3px #BBB;\n}\n:scope .thumb:before,\n:scope .thumb:after {\n  content: \"\";\n  display: block;\n  position: absolute;\n  height: 14px;\n  width: 1px;\n  background: #E8E7E6;\n  left: 14px;\n  top: 6px;\n}\n:scope .thumb:after {\n  left: 17px;\n}\n:scope .thumb-min {\n  left: -17px;\n}\n:scope .thumb-max {\n  right: -17px;\n}\n`)","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"md`### Utilities`","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"randomScope = (function randomScope(prefix = 'scope-') {\n  return prefix + (performance.now() + Math.random()).toString(32).replace('.', '-');\n})","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"html = (htl.html)","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"cssLength = (v => v == null ? null : typeof v === 'number' ? `${v}px` : `${v}`)","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"md`### Documentation`","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"import { signature }  from 'time-range-input/3d9d1394d858ca97'","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"requireCompat = (function requireCompat({invalidation: invalidated = invalidation} = {}) {\n  const DEFINE = 'define';\n  const desc = Object.getOwnPropertyDescriptor(window, DEFINE);\n  if(desc && (!('value' in desc) || !desc.configurable || !desc.writable || !desc.enumerable)) {\n    throw Error('Cannot override non-default descriptor');\n  }\n\n  const defines = new Set(window.define ? [window.define] : []);\n  \n  const bridge = function define(...args) {\n    for(const define of defines) {\n      try { define.apply(window, args) } catch(e) {}\n    }\n  };\n  bridge.amd = {};\n  \n  Object.defineProperty(window, DEFINE, {\n    get: () => bridge,\n    set: value => { defines.add(value) },\n    enumerable: true,\n    configurable: true,\n  });\n\n  const disable = () => {\n    Object.defineProperty(window, DEFINE, desc || {\n      value: desc?.value,\n      enumerable: true,\n      writable: true,\n      configurable: true,\n    });\n  };\n  invalidated.then(disable);\n  return disable;\n})","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"disableCompat = (requireCompat({invalidation}))","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"SLUG = ('@mootari/range-slider')","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"md`### Deprecated`","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"rangeSlider = (function rangeSlider(options = {}) {\n  const {min = 0, max = 1, step = 'any', value, color, theme} = options;\n  const input = rangeInput({min, max, step, value, theme});\n  if(color) input.style.color = color;\n\n  const {precision = 3, format = v => v, display: _display, separator = ' … '} = options;\n  const round   = (p => (p = 10 ** p, v => Math.round(v * p) / p))(precision);\n  const output  = typeof format === 'function' ? format : d3format.format(format);\n  const display = _display || (v => v.map(output).join(separator));\n  \n  const {\n    title, description, submit,\n    getValue = n => n.value.map(round),\n  } = options;\n  \n  const w = jashkenasInput({\n    title, description, submit, display, getValue,\n    form: Object.assign(html`<form>${input}`, {input}),\n  });\n  \n  w.querySelector('output').style.display = 'inline-block';\n  return w;\n})","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"themes = ({\n  'Flat': theme_Flat,\n  'Chrome macOS': theme_GoogleChrome_MacOS1013,\n  'noUiSlider': theme_NoUiSlider,\n  'Retro': theme_Retro1,\n})","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"jashkenasInput = (function input(config) {\n  let {\n    form,\n    type = \"text\",\n    attributes = {},\n    action,\n    getValue,\n    title,\n    description,\n    format,\n    display,\n    submit,\n    options\n  } = config;\n  const wrapper = html`<div></div>`;\n  if (!form)\n    form = html`<form>\n\t<input name=input type=${type} />\n  </form>`;\n  Object.keys(attributes).forEach(key => {\n    const val = attributes[key];\n    if (val != null) form.input.setAttribute(key, val);\n  });\n  if (submit)\n    form.append(\n      html`<input name=submit type=submit style=\"margin: 0 0.75em\" value=\"${\n        typeof submit == \"string\" ? submit : \"Submit\"\n      }\" />`\n    );\n  form.append(\n    html`<output name=output style=\"font: 14px Menlo, Consolas, monospace; margin-left: 0.5em;\"></output>`\n  );\n  if (title)\n    form.prepend(\n      html`<div style=\"font: 700 0.9rem sans-serif; margin-bottom: 3px;\">${title}</div>`\n    );\n  if (description)\n    form.append(\n      html`<div style=\"font-size: 0.85rem; font-style: italic; margin-top: 3px;\">${description}</div>`\n    );\n  if (format)\n    format = typeof format === \"function\" ? format : d3format.format(format);\n  if (action) {\n    action(form);\n  } else {\n    const verb = submit\n      ? \"onsubmit\"\n      : type == \"button\"\n      ? \"onclick\"\n      : type == \"checkbox\" || type == \"radio\"\n      ? \"onchange\"\n      : \"oninput\";\n    form[verb] = e => {\n      e && e.preventDefault();\n      const value = getValue ? getValue(form.input) : form.input.value;\n      if (form.output) {\n        const out = display ? display(value) : format ? format(value) : value;\n        if (out instanceof window.Element) {\n          while (form.output.hasChildNodes()) {\n            form.output.removeChild(form.output.lastChild);\n          }\n          form.output.append(out);\n        } else {\n          form.output.value = out;\n        }\n      }\n      form.value = value;\n      if (verb !== \"oninput\")\n        form.dispatchEvent(new CustomEvent(\"input\", { bubbles: true }));\n    };\n    if (verb !== \"oninput\")\n      wrapper.oninput = e => e && e.stopPropagation() && e.preventDefault();\n    if (verb !== \"onsubmit\") form.onsubmit = e => e && e.preventDefault();\n    form[verb]();\n  }\n  while (form.childNodes.length) {\n    wrapper.appendChild(form.childNodes[0]);\n  }\n  form.append(wrapper);\n  return form;\n})","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"d3format = (require(\"d3-format@1\"))","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"doc_changelog = {\n  const rev = (d, n = '') => `${d} ([${n || 'latest'}](https://observablehq.com/@mootari/range-slider${n}))`;\n  return md`\n---\n## Changelog\n- ${rev('2023-05-03')}\n  - Added ISC license\n- ${rev('2023-04-30', '@1800')}\n  - Removed \\`lazyImport()\\` in favor of the v4 module format.\n- ${rev('2022-05-22', '@1786')}\n  - Changed the \\`step\\` default value in \\`rangeInput\\` to \\`\"any\"\\`.\n  - \\`rangeInput\\` accepts new options \\`color\\` and \\`width\\`.\n  - \\`interval\\` accepts new options \\`format\\`, \\`theme\\`, \\`color\\` and \\`width\\`.\n  - \\`interval\\` uses a single \\`<output>\\` element.\n  - Removed \\`clamp\\` cell.\n  - Inlined \\`d3format\\` and \\`input\\` from \\`@jashkenas/inputs\\`, removed lazy dependency.\n  - Deprecated \\`rangeSlider\\` and \\`themes\\`.\n  - Restructured documentation.\n- ${rev('2022-05-18', '@1342')}\n  - Fixed \\`\"Invalid module\"\\` errors on slow networks.\n- ${rev('2022-04-03', '@1327')}\n  - Dispatch \\`Event\\` instead of \\`CustomEvent\\`.\n  - Dispatch \\`change\\` events.\n- ${rev('2022-01-13', '@1312')}:\n  - Added setter to \\`rangeInput()\\` and \\`interval()\\`.\n  - Fixed \\`interval()\\` events not bubbling.\n- ${rev('2021-12-31', '@1208')}:\n  - Added provisional \\`interval()\\` widget to match the style of Observable's \\`Inputs\\` library. Thanks to [Sylvain Lesage](https://observablehq.com/@severo) for suggesting the name!\n  - Removed a few static imports.\n- ${rev('2020-03-27', '@1004')}: Added new default theme \"Flat\", a more neutral version of the macOS Chrome theme. (via [Jed Fox](https://observablehq.com/@j-f1))\n- ${rev('2020-03-27', '@930')}: Changelog start.\n`;\n}","pinCode":false}}},{"type":"codeTool","data":{"codeData":{"value":"md`---\n## Remaining Tasks / Work in progress\n\n*Code in this section is subject to change. Only import with a pinned version!*\n\n- Delta constraints (min/max range)\n- Keyboard controls\n- Compare with control guidelines in https://material.io/components/sliders\n`","pinCode":false}}}],"version":"2.19.1"}