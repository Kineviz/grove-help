{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"arr = _.filter(window.currentEditor.react_component.state.fileNamesJson,(json,k)=>{return k.startsWith(\"template/\")&&k.split(\"/\").length>2 && json.name !='files'})","pinCode":false,"dname":"7afe0a76-acdc-4613-aaaf-37de8efa7dc5","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"ret = {\n  let ret = {};\n  _.each(arr, (obj, index) => {\n    if (obj.type === \"dir\") {\n      let fileKey = obj.folderKey + obj.name;\n      ret[obj.folderKey.substring(0, obj.folderKey.length - 1)] = {\n        title: obj.name.camelPeakToBlankSplit().firstUpperCase(),\n        description: obj.name.camelPeakToBlankSplit().firstUpperCase(),\n        fileKey: fileKey,\n        files: [],\n      };\n    }\n  });\n  _.each(arr, (obj, index) => {\n    if (obj.type !== \"dir\") {\n      let strs = obj.fileKey.split(\"/\");\n      let o = ret[strs.slice(0, 2).join(\"/\")];\n      if (!o) {\n        return;\n      }\n      let ss = o.fileKey.split(\"/\");\n      if (\n        obj.fileKey !== o.fileKey &&\n        !(\n          /(\\.png|\\.jpeg)$/.test(obj.name) &&\n          ss[ss.length - 1] === obj.name.substring(0, obj.name.indexOf(\".\"))\n        )\n      ) {\n        o.files.push({ fileKey: obj.fileKey, name: obj.name, type: obj.type });\n      }\n    }\n  });\n  return ret;\n}","pinCode":false,"dname":"f5738be9-8756-4a96-93eb-c4275d35b1c8","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"viewof button = Inputs.button(\"Copy code\", {\n  reduce: () => {\n    copyContent(JSON.stringify(_.values(ret), undefined, 1));\n  },\n})","pinCode":true,"dname":"a1f0d50b-d6ef-4558-ae1a-9d4e871615e9","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"JSON.stringify(_.values(ret),undefined,1)","pinCode":true,"dname":"ecd57618-80ce-403a-9d55-bfc555581663","codeMode":"javascript2"}}}],"version":"2.19.1"}