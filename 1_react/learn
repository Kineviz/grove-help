{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"# LEARN","pinCode":false,"dname":"6cd95ccd-fc3e-4a29-9967-10d49634098a","codeMode":"markdown"}}},{"type":"codeTool","data":{"codeData":{"value":"mutable selectedNodes = gxr.nodes(\"[[selected]]\").array","pinCode":false,"dname":"a5fd999c-6f66-4c3a-9f85-92a0e9fd82ef","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"viewof button = render(({ useSetter }) => {\n  const { Button, Select, Space } = Antd;\n  const randomGraphFunc = () => {\n    gxr\n      .graph()\n      .clear()\n      .generate()\n      .degree()\n      .ego(\n        {\n          properties: { degree: (value) => value >= 3 },\n          depth: 5,\n          mode: \"tree\",\n          orientation: \"down\",\n          edgeLength: 0.5,\n          sortByProperty: \"degree\",\n        },\n        { duration: 1000 }\n      );\n  };\n  const selectAllFunc = (d) => {\n    gxr.nodes().style(\"selected\", true);\n    mutable selectedNodes = gxr.nodes(\"[[selected]]\").array;\n  };\n  useSetter({});\n  const layoutFunc = (value) => {\n    gxr[value]({ nodes: gxr.nodes(\"[[selected]]\").array });\n  };\n  return jsx`<${Space} key='2cd16d92-90c0-4517-83a6-d222b4adeba1' direction=\"vertical\">\n     <${Button} onClick=${randomGraphFunc}  >Random Graph<//>\n  \t <${Button} icon=${jsx`<i className=\"fas fa-sync-alt\"></i>`} onClick=${(d) => {\n        mutable selectedNodes = gxr.nodes(\"[[selected]]\").array;\n      }}  >Get Selected Nodes<//>\n  \t <${Button} onClick=${selectAllFunc}  >Select All<//>\n     <div> Layout: <${Select}\n      defaultValue=\"circle\"\n      style=${{ width: 120 }}\n      onChange=${layoutFunc}\n      options=${[\n        { value: \"circle\", label: \"circle\" },\n        { value: \"cube\", label: \"cube\" },\n        { value: \"ego\", label: \"ego\" },\n        { value: \"grid\", label: \"grid\" },\n        { value: \"line\", label: \"line\" },\n      ]}\n    />\n    </div>\n    </${Space}>\n    `;\n})","pinCode":false,"dname":"d4bb24cd-5ad8-4e10-9534-9bc42f8771fe","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"viewof rs = render(({ useSetter }) => {\n  const { Space, Select } = Antd;\n  const [selectNode, setSelectNode] = useState(undefined);\n  useSetter({ selectNode });\n  return jsx`<${Space} key='7f653fcb-6040-4967-a36c-fb8302731547' direction=\"vertical\">\n     <div> Select a node: <${Select}\n      defaultValue=${selectedNodes.indexOf(selectNode)}\n      style=${{ width: 120 }}\n      onChange=${(value) => {\n        setSelectNode(selectedNodes[value]);\n      }}\n      options=${_.reduce(\n        selectedNodes,\n        (p, node, i) => {\n          p.push({ value: i, label: `node ${i}` });\n          return p;\n        },\n        [{ value: -1, label: ` ` }]\n      )}\n    />\n    </div>\n    </${Space}>`;\n})","pinCode":false,"dname":"f192b71c-996a-46aa-bff4-c69710ff7e37","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"rs","pinCode":false,"dname":"1e4efe8e-a6cb-4585-b739-763107a0fd0e","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"categories = listMainCategories();","pinCode":false,"dname":"244baf5f-e521-4fe6-b5c1-38ccfbae2d76","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"viewof select = render(({ useSetter }) => {\n  const { Select } = Antd;\n  const [category, setCategory] = useState(categories[0])\n  const handleChange = (value) => {\n    setCategory(value);\n  };\n  useSetter({category});\n  return jsx`<${Select} key='1ad4a0d0-4b97-4507-a4cb-5e03243632c5'\n                        value=${category}\n                        style=${{ width: 120 }}\n                        onChange=${handleChange}\n                        options=${_.map(categories,(l)=>{\n    return {label:l,\n            value:l\n           }})} />`;\n})","pinCode":false,"dname":"b2c57513-c45b-4030-9e44-7469f01b7c80","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"rows = selectMainDatas(select.category)","pinCode":false,"dname":"c7a293da-2c51-4caf-8a89-aeb3bd3d6f78","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"editTable = render(({useSetter})=>{\n  const { Form, Input, InputNumber, Popconfirm, Table, Typography } = Antd;\n  const originData = _.map(rows.data,(r,i)=>{\n  \treturn _.assign(r.key?{}:{key:rows.data.keysArr[i]},r)\n  });\n  const EditableCell = ({\n    editing,\n    dataIndex,\n    title,\n    inputType,\n    record,\n    index,\n    children,\n    ...restProps\n  }) => {\n    const inputNode = inputType === 'number' ? jsx`<${InputNumber} />` : jsx`<${Input} />`;\n    return (\n      jsx`<td ...${restProps}>\n        ${editing ? (\n          jsx`<${Form.Item}\n            name=${dataIndex}\n            style=${{\n              margin: 0,\n            }}\n            rules=${[\n              {\n                required: true,\n                message: `Please Input ${title}!`,\n              },\n            ]}\n          >\n            ${inputNode}\n          </${Form.Item}>`\n        ) : (\n          children\n        )}\n      </td>`\n    );\n  };\n  const App = () => {\n    const [form] = Form.useForm();\n    const [data, setData] = useState(originData);\n    const [editingKey, setEditingKey] = useState('');\n    const isEditing = (record) => record.key === editingKey;\n    const edit = (record) => {\n      form.setFieldsValue({\n        name: '',\n        age: '',\n        address: '',\n        ...record,\n      });\n      setEditingKey(record.key);\n    };\n    const cancel = () => {\n      setEditingKey('');\n    };\n    const save = async (key) => {\n      try {\n        const row = await form.validateFields();\n        const newData = [...data];\n        const index = newData.findIndex((item) => key === item.key);\n        debugger\n        if (index > -1) {\n          const item = newData[index];\n//           let node  = gxr.getNode(item.key);\n          let properties = {\n            ...item,\n            ...row,\n          };\n          delete properties.key;\n          gxr.nodes(item.key).properties(properties);\n          newData.splice(index, 1, properties);\n          setData(newData);\n          setEditingKey('');\n        } else {\n          alert(\"can not find the row!\")\n        }\n      } catch (errInfo) {\n        console.log('Validate Failed:', errInfo);\n      }\n    };\n    const columns = [\n      ..._.map(_.cloneDeep(rows.columns),(r)=>{return _.assign({},r,{editable:true})}),\n      {\n        title: 'operation',\n        dataIndex: 'operation',\n        render: (_, record) => {\n          const editable = isEditing(record);\n          return editable ? (\n            jsx`<span>\n              <${Typography.Link}\n                onClick=${() => save(record.key)}\n                style=${{\n                  marginRight: 8,\n                }}\n              >\n                Save\n              </${Typography.Link}>\n              <${Popconfirm} title=\"Sure to cancel?\" onConfirm=${cancel}>\n                <a>Cancel</a>\n              </${Popconfirm}>\n            </span>`\n          ) : (\n            jsx`<${Typography.Link} disabled=${editingKey !== ''} onClick=${() => edit(record)}>\n              Edit\n            </${Typography.Link}>`\n          );\n        },\n      },\n    ];\n    const mergedColumns = columns.map((col) => {\n      if (!col.editable) {\n        return col;\n      }\n      return {\n        ...col,\n        onCell: (record) => ({\n          record,\n          inputType: col.dataIndex === 'age' ? 'number' : 'text',\n          dataIndex: col.dataIndex,\n          title: col.title,\n          editing: isEditing(record),\n        }),\n      };\n    });\n    return (\n      jsx`<${Form} key='6f2a85e8-b9a8-4f34-a098-d7a7659bbf1a' form=${form} component=${false}>\n        <${Table}\n          components=${{\n            body: {\n              cell: EditableCell,\n            },\n          }}\n          bordered\n          dataSource=${data}\n          columns=${mergedColumns}\n          rowClassName=\"editable-row\"\n          pagination=${{\n            onChange: cancel,\n          }}\n        />\n      </${Form}>`\n    );\n  };\n  return jsx`<${App} key='3ffcd1c2-9938-47a4-85cf-9ca597377800' />`\n})\n","pinCode":false,"dname":"cee776b3-255f-408e-a9fd-eef1e5e0244c","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"import { jsx, render, useState, component, useEffect, Fragment } from \"https://grove-help.graphxr.com/react/react\"","pinCode":false,"dname":"2f94e771-d9a2-469a-9b35-0fa9cf39eac5","codeMode":"javascript2"}}}],"version":"2.19.1"}