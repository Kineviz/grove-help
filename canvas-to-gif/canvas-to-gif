{"blocks":[{"type":"codeTool","data":{"codeData":{"value":"md`# Canvas to GIF2\n\nLetâ€™s make an animated GIF from a Canvas element using [gif.js](https://jnordberg.github.io/gif.js/).`","pinCode":false,"dname":"85e58e04-f21a-4954-99b3-fad6231301d4","codeMode":"javascript2","vimEnabled":false,"insertMode":false}}},{"type":"codeTool","data":{"codeData":{"value":"viewof gif = {\n  const gif = new GIF;\n  const canvas = DOM.canvas(width, height);\n  const context = canvas.getContext(\"2d\");\n  context.font = \"128px Helvetica Neue\";\n  context.textAlign = \"center\";\n  for (let i = 0, n = 10; i < n; ++i) {\n    context.clearRect(0, 0, width, height);\n    context.fillStyle = `hsl(${i / n * 360},100%,50%)`;\n    context.fillText(`Frame ${i}`, width / 2, height / 2 + 40);\n    gif.addFrame(canvas, {copy: true, delay: 250});\n    yield canvas;\n  }\n  canvas.value = new Promise(resolve => gif.on(\"finished\", resolve));\n  gif.render();\n  yield canvas;\n}","pinCode":false,"dname":"6bc6e7f5-8fa7-455f-ad10-a3e267001fa9","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"html`<img src=\"${URL.createObjectURL(gif, {type: \"image/gif\"})}\">`","pinCode":false,"dname":"3dd4d7e1-c0f8-4598-b8be-f1645fcf78bf","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"DOM.download(gif)","pinCode":false,"dname":"a2e19967-f1b1-49e3-9b67-bdcd34483068","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"GIF = {\n  const [gif, workerScript] = await Promise.all([\n    require(\"gif.js@0.2\"),\n    require.resolve(\"gif.js@0.2/dist/gif.worker.js\")\n      .then(fetch)\n      .then(response => response.blob())\n      .then(blob => URL.createObjectURL(blob, {type: \"text/javascript\"}))\n  ]);\n  return class extends gif {\n    constructor(options) {\n      super({workerScript, ...options});\n    }\n  };\n}","pinCode":false,"dname":"db3a289a-53a1-4124-b13d-47fc261dea45","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"width = (640)","pinCode":false,"dname":"15e03bbc-c1a7-4279-a5f9-5d4f85642308","codeMode":"javascript2"}}},{"type":"codeTool","data":{"codeData":{"value":"height = (480)","pinCode":false,"dname":"c241c916-7e92-4f79-bb16-2e3eb3614875","codeMode":"javascript2"}}}],"version":"2.19.1"}